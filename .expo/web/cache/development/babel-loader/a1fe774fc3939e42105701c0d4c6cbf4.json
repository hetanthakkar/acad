{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\codemaxx\\\\Desktop\\\\iBlood\\\\node_modules\\\\react-native-render-html\\\\src\\\\HTML.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { cssStringToRNStyle, _getElementClassStyles, cssStringToObject, cssObjectToString, computeTextStyles } from \"./HTMLStyles\";\nimport { BLOCK_TAGS, TEXT_TAGS, MIXED_TAGS, IGNORED_TAGS, TEXT_TAGS_IGNORING_ASSOCIATION, STYLESETS, TextOnlyPropTypes, PREFORMATTED_TAGS } from \"./HTMLUtils\";\nimport { generateDefaultBlockStyles, generateDefaultTextStyles } from \"./HTMLDefaultStyles\";\nimport { DomHandler, Parser } from 'htmlparser2';\nimport * as HTMLRenderers from \"./HTMLRenderers\";\n\nvar HTML = function (_PureComponent) {\n  _inherits(HTML, _PureComponent);\n\n  var _super = _createSuper(HTML);\n\n  function HTML(props) {\n    var _this;\n\n    _classCallCheck(this, HTML);\n\n    _this = _super.call(this, props);\n    _this.state = {};\n    _this.renderers = _objectSpread(_objectSpread({}, HTMLRenderers), _this.props.renderers || {});\n    _this.mounted = false;\n\n    _this.generateDefaultStyles(props.baseFontStyle);\n\n    return _this;\n  }\n\n  _createClass(HTML, [{\n    key: \"setStateSafe\",\n    value: function setStateSafe() {\n      this.mounted && this.setState.apply(this, arguments);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.mounted = true;\n      this.registerDOM();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.mounted = false;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var html = prevProps.html,\n          uri = prevProps.uri,\n          renderers = prevProps.renderers,\n          tagsStyles = prevProps.tagsStyles,\n          classesStyles = prevProps.classesStyles;\n      var doParseDOM = false;\n      this.generateDefaultStyles(this.props.baseFontStyle);\n\n      if (renderers !== this.props.renderers) {\n        this.renderers = _objectSpread(_objectSpread({}, HTMLRenderers), this.props.renderers || {});\n      }\n\n      if (html !== this.props.html || uri !== this.props.uri) {\n        this.registerDOM(this.props);\n      }\n\n      if (tagsStyles !== this.props.tagsStyles || classesStyles !== this.props.classesStyles) {\n        this.parseDOM(this.state.dom, this.props);\n      }\n\n      if (this.state.dom !== prevState.dom) {\n        this.parseDOM(this.state.dom, this.props);\n      }\n    }\n  }, {\n    key: \"registerDOM\",\n    value: function registerDOM() {\n      var props,\n          cb,\n          html,\n          uri,\n          response,\n          dom,\n          _args = arguments;\n      return _regeneratorRuntime.async(function registerDOM$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              props = _args.length > 0 && _args[0] !== undefined ? _args[0] : this.props;\n              cb = _args.length > 1 ? _args[1] : undefined;\n              html = props.html, uri = props.uri;\n\n              if (!html) {\n                _context.next = 7;\n                break;\n              }\n\n              this.setStateSafe({\n                dom: html,\n                loadingRemoteURL: false,\n                errorLoadingRemoteURL: false\n              });\n              _context.next = 33;\n              break;\n\n            case 7:\n              if (!props.uri) {\n                _context.next = 32;\n                break;\n              }\n\n              _context.prev = 8;\n              _context.prev = 9;\n              this.setStateSafe({\n                loadingRemoteURL: true,\n                errorLoadingRemoteURL: false\n              });\n              _context.next = 13;\n              return _regeneratorRuntime.awrap(fetch(uri));\n\n            case 13:\n              response = _context.sent;\n              _context.next = 16;\n              return _regeneratorRuntime.awrap(response.text());\n\n            case 16:\n              dom = _context.sent;\n              this.setStateSafe({\n                dom: dom,\n                loadingRemoteURL: false\n              });\n              _context.next = 24;\n              break;\n\n            case 20:\n              _context.prev = 20;\n              _context.t0 = _context[\"catch\"](9);\n              console.warn(_context.t0);\n              this.setStateSafe({\n                errorLoadingRemoteURL: true,\n                loadingRemoteURL: false\n              });\n\n            case 24:\n              _context.next = 30;\n              break;\n\n            case 26:\n              _context.prev = 26;\n              _context.t1 = _context[\"catch\"](8);\n              console.warn('react-native-render-html', \"Couldn't fetch remote HTML from uri : \" + uri);\n              return _context.abrupt(\"return\", false);\n\n            case 30:\n              _context.next = 33;\n              break;\n\n            case 32:\n              console.warn('react-native-render-html', 'Please provide the html or uri prop.');\n\n            case 33:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, [[8, 26], [9, 20]], Promise);\n    }\n  }, {\n    key: \"parseDOM\",\n    value: function parseDOM(dom) {\n      var _this2 = this;\n\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.props;\n      var _this$props = this.props,\n          decodeEntities = _this$props.decodeEntities,\n          debug = _this$props.debug,\n          onParsed = _this$props.onParsed;\n      var parser = new Parser(new DomHandler(function (_err, dom) {\n        var RNElements = _this2.mapDOMNodesTORNElements(dom, false, props);\n\n        if (onParsed) {\n          var alteredRNElements = onParsed(dom, RNElements);\n\n          if (alteredRNElements) {\n            RNElements = alteredRNElements;\n          }\n        }\n\n        _this2.setStateSafe({\n          RNNodes: _this2.renderRNElements(RNElements, 'root', 0, props)\n        });\n\n        if (debug) {\n          console.log('DOMNodes from htmlparser2', dom);\n          console.log('RNElements from render-html', RNElements);\n        }\n      }), {\n        decodeEntities: decodeEntities\n      });\n      parser.write(dom);\n      parser.done();\n    }\n  }, {\n    key: \"generateDefaultStyles\",\n    value: function generateDefaultStyles() {\n      var baseFontStyle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props.baseFontStyle;\n      this.defaultBlockStyles = generateDefaultBlockStyles(baseFontStyle.fontSize || 14);\n      this.defaultTextStyles = generateDefaultTextStyles(baseFontStyle.fontSize || 14);\n    }\n  }, {\n    key: \"childrenNeedAView\",\n    value: function childrenNeedAView(children) {\n      for (var i = 0; i < children.length; i++) {\n        if (children[i].wrapper === 'View') {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"wrapperHasTextChild\",\n    value: function wrapperHasTextChild(children) {\n      for (var i = 0; i < children.length; i++) {\n        if (children[i].wrapper === 'Text') {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"associateRawTexts\",\n    value: function associateRawTexts(children) {\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n\n        if (child.wrapper === 'Text' && TEXT_TAGS_IGNORING_ASSOCIATION.indexOf(child.tagName) === -1 && children.length > 1 && (!child.parent || TEXT_TAGS_IGNORING_ASSOCIATION.indexOf(child.parent.name) === -1)) {\n          var wrappedTexts = [];\n\n          for (var j = i; j < children.length; j++) {\n            var nextSibling = children[j];\n\n            if (nextSibling.wrapper !== 'Text' || TEXT_TAGS_IGNORING_ASSOCIATION.indexOf(nextSibling.tagName) !== -1) {\n              break;\n            }\n\n            wrappedTexts.push(nextSibling);\n            children[j] = false;\n          }\n\n          if (wrappedTexts.length) {\n            children[i] = {\n              attribs: {},\n              children: wrappedTexts,\n              nodeIndex: i,\n              parent: child.parent,\n              parentTag: child.parentTag,\n              tagName: 'textwrapper',\n              wrapper: 'Text'\n            };\n          }\n        }\n      }\n\n      return children.filter(function (parsedNode) {\n        return parsedNode !== false && parsedNode !== undefined;\n      });\n    }\n  }, {\n    key: \"mapDOMNodesTORNElements\",\n    value: function mapDOMNodesTORNElements(DOMNodes) {\n      var _this3 = this;\n\n      var parentTag = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.props;\n      var ignoreNodesFunction = props.ignoreNodesFunction,\n          ignoredTags = props.ignoredTags,\n          alterNode = props.alterNode,\n          alterData = props.alterData,\n          alterChildren = props.alterChildren,\n          tagsStyles = props.tagsStyles,\n          classesStyles = props.classesStyles;\n      var RNElements = DOMNodes.map(function (node, nodeIndex) {\n        var _node = node,\n            children = _node.children,\n            data = _node.data;\n\n        if (ignoreNodesFunction && ignoreNodesFunction(node, parentTag) === true) {\n          return false;\n        }\n\n        if (ignoredTags.map(function (tag) {\n          return tag.toLowerCase();\n        }).indexOf(node.name && node.name.toLowerCase()) !== -1) {\n          return false;\n        }\n\n        if (alterNode) {\n          var alteredNode = alterNode(node);\n          node = alteredNode || node;\n        }\n\n        var _node2 = node,\n            type = _node2.type,\n            attribs = _node2.attribs,\n            name = _node2.name,\n            parent = _node2.parent;\n\n        if (alterData && data) {\n          var alteredData = alterData(node);\n          data = alteredData || data;\n        }\n\n        if (alterChildren && children) {\n          var alteredChildren = alterChildren(node);\n          children = alteredChildren || children;\n        }\n\n        var strippedData = data && data.replace(/\\s/g, '');\n\n        if (type === 'text') {\n          if (!strippedData || !strippedData.length) {\n            return false;\n          }\n\n          if (node.parent && node.parent.name && PREFORMATTED_TAGS.indexOf(node.parent.name) === -1) {\n            data = data.replace(/(\\r\\n|\\n|\\r)/gm, '');\n          }\n\n          return {\n            wrapper: 'Text',\n            data: data,\n            attribs: attribs || {},\n            parent: parent,\n            parentTag: parent && parent.name,\n            tagName: name || 'rawtext'\n          };\n        }\n\n        if (type === 'tag') {\n          if (children) {\n            children = _this3.associateRawTexts(_this3.mapDOMNodesTORNElements(children, name));\n          }\n\n          var wrapper = \"View\";\n\n          if (_this3.childrenNeedAView(children)) {\n            wrapper = \"View\";\n          } else if (_this3.renderers[name] && _this3.renderers[name].wrapper) {\n            wrapper = _this3.renderers[name].wrapper;\n          } else if (BLOCK_TAGS.indexOf(name.toLowerCase()) !== -1) {\n            wrapper = \"View\";\n          } else if (TEXT_TAGS.indexOf(name.toLowerCase()) !== -1 || MIXED_TAGS.indexOf(name.toLowerCase()) !== -1) {\n            wrapper = \"Text\";\n          }\n\n          return {\n            wrapper: wrapper,\n            children: children,\n            attribs: attribs,\n            parent: parent,\n            tagName: name,\n            parentTag: parentTag\n          };\n        }\n      }).filter(function (parsedNode) {\n        return parsedNode !== false && parsedNode !== undefined;\n      }).map(function (parsedNode, nodeIndex) {\n        var wrapper = parsedNode.wrapper,\n            children = parsedNode.children,\n            attribs = parsedNode.attribs,\n            tagName = parsedNode.tagName;\n        var firstChild = children && children[0];\n\n        if (firstChild && children.length === 1) {\n          if ((attribs === firstChild.attribs || !firstChild.attribs) && firstChild.wrapper === wrapper && (tagName === firstChild.tagName || firstChild.tagName === 'rawtext')) {\n            return _objectSpread(_objectSpread({}, parsedNode), {}, {\n              attribs: _objectSpread(_objectSpread({}, attribs), firstChild.attribs),\n              data: firstChild.data,\n              children: [],\n              tagName: tagName,\n              nodeIndex: nodeIndex\n            });\n          }\n        }\n\n        return _objectSpread(_objectSpread({}, parsedNode), {}, {\n          nodeIndex: nodeIndex\n        });\n      }).map(function (parsedNode, nodeIndex) {\n        var wrapper = parsedNode.wrapper,\n            attribs = parsedNode.attribs,\n            tagName = parsedNode.tagName,\n            children = parsedNode.children;\n\n        if (wrapper === 'View' && attribs && _this3.wrapperHasTextChild(children)) {\n          var wrapperStyles = _objectSpread(_objectSpread(_objectSpread({}, tagsStyles[tagName] || {}), _getElementClassStyles(attribs, classesStyles)), cssStringToObject(attribs.style || ''));\n\n          var textChildrenInheritedStyles = {};\n          Object.keys(wrapperStyles).forEach(function (styleKey) {\n            if (TextOnlyPropTypes.indexOf(styleKey) !== -1) {\n              textChildrenInheritedStyles[styleKey] = wrapperStyles[styleKey];\n              delete wrapperStyles[styleKey];\n            }\n          });\n\n          if (Object.keys(textChildrenInheritedStyles).length === 0) {\n            return parsedNode;\n          }\n\n          parsedNode.attribs.style = cssObjectToString(wrapperStyles);\n\n          for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            var _wrapper = child.wrapper,\n                _attribs = child.attribs;\n\n            if (_wrapper === 'Text') {\n              if (!_attribs.style) {\n                child.attribs.style = cssObjectToString(textChildrenInheritedStyles);\n              } else {\n                child.attribs.style = cssObjectToString(_objectSpread(_objectSpread({}, textChildrenInheritedStyles), cssStringToObject(child.attribs.style)));\n              }\n            }\n          }\n        }\n\n        return parsedNode;\n      });\n      return this.associateRawTexts(RNElements);\n    }\n  }, {\n    key: \"renderRNElements\",\n    value: function renderRNElements(RNElements) {\n      var _this4 = this;\n\n      var parentWrapper = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'root';\n      var parentIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var props = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.props;\n      var allowFontScaling = props.allowFontScaling,\n          allowedStyles = props.allowedStyles,\n          baseFontStyle = props.baseFontStyle,\n          classesStyles = props.classesStyles,\n          emSize = props.emSize,\n          ignoredStyles = props.ignoredStyles,\n          ptSize = props.ptSize,\n          tagsStyles = props.tagsStyles,\n          textSelectable = props.textSelectable;\n      return RNElements && RNElements.length ? RNElements.map(function (element, index) {\n        var attribs = element.attribs,\n            data = element.data,\n            tagName = element.tagName,\n            parentTag = element.parentTag,\n            children = element.children,\n            nodeIndex = element.nodeIndex,\n            wrapper = element.wrapper;\n        var Wrapper = wrapper === 'Text' ? Text : View;\n        var key = wrapper + \"-\" + parentIndex + \"-\" + nodeIndex + \"-\" + tagName + \"-\" + index + \"-\" + parentTag;\n        var convertedCSSStyles = attribs && attribs.style ? cssStringToRNStyle(attribs.style, Wrapper === Text ? STYLESETS.TEXT : STYLESETS.VIEW, {\n          parentTag: tagName,\n          emSize: emSize,\n          ptSize: ptSize,\n          ignoredStyles: ignoredStyles,\n          allowedStyles: allowedStyles\n        }) : {};\n        var childElements = children && children.length ? children.map(function (child, childIndex) {\n          return _this4.renderRNElements([child], wrapper, index, props);\n        }) : false;\n        var renderersProps = {};\n\n        if (Wrapper === Text) {\n          renderersProps.allowFontScaling = allowFontScaling;\n          renderersProps.selectable = _this4.props.textSelectable;\n        }\n\n        if (_this4.renderers[tagName]) {\n          var customRenderer = typeof _this4.renderers[tagName] === 'function' ? _this4.renderers[tagName] : _this4.renderers[tagName].renderer;\n\n          if (!customRenderer || typeof customRenderer !== 'function') {\n            console.warn(\"Custom renderer for \" + tagName + \" supplied incorrectly. Please check out the docs.\");\n            return undefined;\n          }\n\n          return customRenderer(attribs, childElements, convertedCSSStyles, _objectSpread(_objectSpread({}, props), {}, {\n            parentWrapper: wrapper,\n            parentTag: parentTag,\n            nodeIndex: nodeIndex,\n            parentIndex: parentIndex,\n            key: key,\n            data: data,\n            rawChildren: children\n          }, renderersProps));\n        }\n\n        var classStyles = _getElementClassStyles(attribs, classesStyles);\n\n        var textElement = data ? React.createElement(Text, {\n          allowFontScaling: allowFontScaling,\n          style: computeTextStyles(element, {\n            defaultTextStyles: _this4.defaultTextStyles,\n            tagsStyles: tagsStyles,\n            classesStyles: classesStyles,\n            baseFontStyle: baseFontStyle,\n            emSize: emSize,\n            ptSize: ptSize,\n            ignoredStyles: ignoredStyles,\n            allowedStyles: allowedStyles\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 17\n          }\n        }, data) : false;\n        var style = [!tagsStyles || !tagsStyles[tagName] ? (Wrapper === Text ? _this4.defaultTextStyles : _this4.defaultBlockStyles)[tagName] : undefined, tagsStyles ? tagsStyles[tagName] : undefined, classStyles, convertedCSSStyles].filter(function (s) {\n          return s !== undefined;\n        });\n        return React.createElement(Wrapper, _extends({\n          key: key,\n          style: style\n        }, renderersProps, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 17\n          }\n        }), textElement, childElements);\n      }) : false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          allowFontScaling = _this$props2.allowFontScaling,\n          customWrapper = _this$props2.customWrapper,\n          remoteLoadingView = _this$props2.remoteLoadingView,\n          remoteErrorView = _this$props2.remoteErrorView;\n      var _this$state = this.state,\n          RNNodes = _this$state.RNNodes,\n          loadingRemoteURL = _this$state.loadingRemoteURL,\n          errorLoadingRemoteURL = _this$state.errorLoadingRemoteURL;\n\n      if (!RNNodes && !loadingRemoteURL && !errorLoadingRemoteURL) {\n        return null;\n      } else if (loadingRemoteURL) {\n        return remoteLoadingView ? remoteLoadingView(this.props, this.state) : React.createElement(View, {\n          style: {\n            flex: 1,\n            alignItems: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 21\n          }\n        }, React.createElement(ActivityIndicator, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 25\n          }\n        }));\n      } else if (errorLoadingRemoteURL) {\n        return remoteErrorView ? remoteErrorView(this.props, this.state) : React.createElement(View, {\n          style: {\n            flex: 1,\n            alignItems: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 21\n          }\n        }, React.createElement(Text, {\n          allowFontScaling: allowFontScaling,\n          style: {\n            fontStyle: 'italic',\n            fontSize: 16\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 25\n          }\n        }, \"Could not load \", this.props.uri));\n      }\n\n      return customWrapper ? customWrapper(RNNodes) : React.createElement(View, {\n        style: this.props.containerStyle || {},\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 13\n        }\n      }, RNNodes);\n    }\n  }]);\n\n  return HTML;\n}(PureComponent);\n\nHTML.propTypes = {\n  renderers: PropTypes.object.isRequired,\n  ignoredTags: PropTypes.array.isRequired,\n  ignoredStyles: PropTypes.array.isRequired,\n  allowedStyles: PropTypes.array,\n  decodeEntities: PropTypes.bool.isRequired,\n  debug: PropTypes.bool.isRequired,\n  listsPrefixesRenderers: PropTypes.object,\n  ignoreNodesFunction: PropTypes.func,\n  alterData: PropTypes.func,\n  alterChildren: PropTypes.func,\n  alterNode: PropTypes.func,\n  html: PropTypes.string,\n  uri: PropTypes.string,\n  tagsStyles: PropTypes.object,\n  classesStyles: PropTypes.object,\n  containerStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  customWrapper: PropTypes.func,\n  onLinkPress: PropTypes.func,\n  onParsed: PropTypes.func,\n  imagesMaxWidth: PropTypes.number,\n  staticContentMaxWidth: PropTypes.number,\n  imagesInitialDimensions: PropTypes.shape({\n    width: PropTypes.number,\n    height: PropTypes.number\n  }),\n  emSize: PropTypes.number.isRequired,\n  ptSize: PropTypes.number.isRequired,\n  baseFontStyle: PropTypes.object.isRequired,\n  textSelectable: PropTypes.bool,\n  renderersProps: PropTypes.object,\n  allowFontScaling: PropTypes.bool\n};\nHTML.defaultProps = {\n  renderers: HTMLRenderers,\n  debug: false,\n  decodeEntities: true,\n  emSize: 14,\n  ptSize: 1.3,\n  staticContentMaxWidth: Dimensions.get('window').width,\n  imagesMaxWidth: Dimensions.get('window').width,\n  ignoredTags: IGNORED_TAGS,\n  ignoredStyles: [],\n  baseFontStyle: {\n    fontSize: 14\n  },\n  tagsStyles: {},\n  classesStyles: {},\n  textSelectable: false,\n  allowFontScaling: true\n};\nexport { HTML as default };","map":{"version":3,"sources":["C:/Users/codemaxx/Desktop/iBlood/node_modules/react-native-render-html/src/HTML.js"],"names":["React","PureComponent","PropTypes","cssStringToRNStyle","_getElementClassStyles","cssStringToObject","cssObjectToString","computeTextStyles","BLOCK_TAGS","TEXT_TAGS","MIXED_TAGS","IGNORED_TAGS","TEXT_TAGS_IGNORING_ASSOCIATION","STYLESETS","TextOnlyPropTypes","PREFORMATTED_TAGS","generateDefaultBlockStyles","generateDefaultTextStyles","DomHandler","Parser","HTMLRenderers","HTML","props","state","renderers","mounted","generateDefaultStyles","baseFontStyle","setState","registerDOM","prevProps","prevState","html","uri","tagsStyles","classesStyles","doParseDOM","parseDOM","dom","cb","setStateSafe","loadingRemoteURL","errorLoadingRemoteURL","fetch","response","text","console","warn","decodeEntities","debug","onParsed","parser","_err","RNElements","mapDOMNodesTORNElements","alteredRNElements","RNNodes","renderRNElements","log","write","done","defaultBlockStyles","fontSize","defaultTextStyles","children","i","length","wrapper","child","indexOf","tagName","parent","name","wrappedTexts","j","nextSibling","push","attribs","nodeIndex","parentTag","filter","parsedNode","undefined","DOMNodes","ignoreNodesFunction","ignoredTags","alterNode","alterData","alterChildren","map","node","data","tag","toLowerCase","alteredNode","type","alteredData","alteredChildren","strippedData","replace","associateRawTexts","childrenNeedAView","firstChild","wrapperHasTextChild","wrapperStyles","style","textChildrenInheritedStyles","Object","keys","forEach","styleKey","parentWrapper","parentIndex","allowFontScaling","allowedStyles","emSize","ignoredStyles","ptSize","textSelectable","element","index","Wrapper","Text","View","key","convertedCSSStyles","TEXT","VIEW","childElements","childIndex","renderersProps","selectable","customRenderer","renderer","rawChildren","classStyles","textElement","s","customWrapper","remoteLoadingView","remoteErrorView","flex","alignItems","fontStyle","containerStyle","propTypes","object","isRequired","array","bool","listsPrefixesRenderers","func","string","oneOfType","onLinkPress","imagesMaxWidth","number","staticContentMaxWidth","imagesInitialDimensions","shape","width","height","defaultProps","Dimensions","get"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { View, Text, ActivityIndicator, Dimensions } from 'react-native';\nimport { cssStringToRNStyle, _getElementClassStyles, cssStringToObject, cssObjectToString, computeTextStyles } from './HTMLStyles';\nimport {\n    BLOCK_TAGS,\n    TEXT_TAGS,\n    MIXED_TAGS,\n    IGNORED_TAGS,\n    TEXT_TAGS_IGNORING_ASSOCIATION,\n    STYLESETS,\n    TextOnlyPropTypes,\n    PREFORMATTED_TAGS\n} from './HTMLUtils';\nimport { generateDefaultBlockStyles, generateDefaultTextStyles } from './HTMLDefaultStyles';\nimport { DomHandler, Parser } from 'htmlparser2';\nimport * as HTMLRenderers from './HTMLRenderers';\n\nexport default class HTML extends PureComponent {\n    static propTypes = {\n        renderers: PropTypes.object.isRequired,\n        ignoredTags: PropTypes.array.isRequired,\n        ignoredStyles: PropTypes.array.isRequired,\n        allowedStyles: PropTypes.array,\n        decodeEntities: PropTypes.bool.isRequired,\n        debug: PropTypes.bool.isRequired,\n        listsPrefixesRenderers: PropTypes.object,\n        ignoreNodesFunction: PropTypes.func,\n        alterData: PropTypes.func,\n        alterChildren: PropTypes.func,\n        alterNode: PropTypes.func,\n        html: PropTypes.string,\n        uri: PropTypes.string,\n        tagsStyles: PropTypes.object,\n        classesStyles: PropTypes.object,\n        containerStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n        customWrapper: PropTypes.func,\n        onLinkPress: PropTypes.func,\n        onParsed: PropTypes.func,\n        imagesMaxWidth: PropTypes.number,\n        staticContentMaxWidth: PropTypes.number,\n        imagesInitialDimensions: PropTypes.shape({\n            width: PropTypes.number,\n            height: PropTypes.number\n        }),\n        emSize: PropTypes.number.isRequired,\n        ptSize: PropTypes.number.isRequired,\n        baseFontStyle: PropTypes.object.isRequired,\n        textSelectable: PropTypes.bool,\n        renderersProps: PropTypes.object,\n        allowFontScaling: PropTypes.bool\n    }\n\n    static defaultProps = {\n        renderers: HTMLRenderers,\n        debug: false,\n        decodeEntities: true,\n        emSize: 14,\n        ptSize: 1.3,\n        staticContentMaxWidth: Dimensions.get('window').width,\n        imagesMaxWidth: Dimensions.get('window').width,\n        ignoredTags: IGNORED_TAGS,\n        ignoredStyles: [],\n        baseFontStyle: { fontSize: 14 },\n        tagsStyles: {},\n        classesStyles: {},\n        textSelectable: false,\n        allowFontScaling: true\n    }\n\n    constructor (props) {\n        super(props);\n        this.state = {};\n        this.renderers = {\n            ...HTMLRenderers,\n            ...(this.props.renderers || {})\n        };\n        this.mounted = false;\n        this.generateDefaultStyles(props.baseFontStyle);\n    }\n\n    setStateSafe(...args) {\n        this.mounted && this.setState(...args);\n    }\n\n    componentDidMount () {\n        this.mounted = true;\n        this.registerDOM();\n    }\n\n    componentWillUnmount() {\n        this.mounted = false;\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        const { html, uri, renderers, tagsStyles, classesStyles } = prevProps;\n        let doParseDOM = false;\n\n        this.generateDefaultStyles(this.props.baseFontStyle);\n        if (renderers !== this.props.renderers) {\n            this.renderers = { ...HTMLRenderers, ...(this.props.renderers || {}) };\n        }\n        if (html !== this.props.html || uri !== this.props.uri) {\n            // If the source changed, register the new HTML and parse it\n            this.registerDOM(this.props);\n        }\n        if (tagsStyles !== this.props.tagsStyles || classesStyles !== this.props.classesStyles) {\n            // If the tagsStyles changed, render again\n            this.parseDOM(this.state.dom, this.props);\n        }\n        if (this.state.dom !== prevState.dom) {\n            this.parseDOM(this.state.dom, this.props);\n        }\n    }\n\n    async registerDOM (props = this.props, cb) {\n        const { html, uri } = props;\n        if (html) {\n            this.setStateSafe({ dom: html, loadingRemoteURL: false, errorLoadingRemoteURL: false });\n        } else if (props.uri) {\n            try {\n                // WIP : This should render a loader and html prop should not be set in state\n                // Error handling would be nice, too.\n                try {\n                    this.setStateSafe({ loadingRemoteURL: true, errorLoadingRemoteURL: false });\n                    const response = await fetch(uri);\n                    const dom = await response.text();\n                    this.setStateSafe({ dom, loadingRemoteURL: false });\n                } catch (err) {\n                    console.warn(err);\n                    this.setStateSafe({ errorLoadingRemoteURL: true, loadingRemoteURL: false });\n                }\n            } catch (err) {\n                console.warn('react-native-render-html', `Couldn't fetch remote HTML from uri : ${uri}`);\n                return false;\n            }\n        } else {\n            console.warn('react-native-render-html', 'Please provide the html or uri prop.');\n        }\n    }\n\n    parseDOM (dom, props = this.props) {\n        const { decodeEntities, debug, onParsed } = this.props;\n        const parser = new Parser(\n            new DomHandler((_err, dom) => {\n                let RNElements = this.mapDOMNodesTORNElements(dom, false, props);\n                if (onParsed) {\n                    const alteredRNElements = onParsed(dom, RNElements);\n                    if (alteredRNElements) {\n                        RNElements = alteredRNElements;\n                    }\n                }\n                this.setStateSafe({ RNNodes: this.renderRNElements(RNElements, 'root', 0, props) });\n                if (debug) {\n                    console.log('DOMNodes from htmlparser2', dom);\n                    console.log('RNElements from render-html', RNElements);\n                }\n            }),\n            { decodeEntities: decodeEntities }\n        );\n        parser.write(dom);\n        parser.done();\n    }\n\n    generateDefaultStyles (baseFontStyle = this.props.baseFontStyle) {\n        this.defaultBlockStyles = generateDefaultBlockStyles(baseFontStyle.fontSize || 14);\n        this.defaultTextStyles = generateDefaultTextStyles(baseFontStyle.fontSize || 14);\n    }\n\n    /**\n     * Loop on children and return whether if their parent needs to be a <View>\n     * @param {any} children\n     * @returns {boolean}\n     * @memberof HTML\n     */\n    childrenNeedAView (children) {\n        for (let i = 0; i < children.length; i++) {\n            if (children[i].wrapper === 'View') {\n                // If we find at least one View, it has to be nested in one\n                return true;\n            }\n        }\n        // We didn't find a single view, it can be wrapped in a Text\n        return false;\n    }\n\n    wrapperHasTextChild (children) {\n        for (let i = 0; i < children.length; i++) {\n            if (children[i].wrapper === 'Text') {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Loops on children an find texts that need to be wrapped so we don't render line breaks\n     * The wrapper can either be a <p> when it should be a paragraph, or a custom tag named\n     * \"textwrapper\", which renders a plain <Text> component.\n     * @param {any} children\n     * @returns {array}\n     * @memberof HTML\n     */\n    associateRawTexts (children) {\n        for (let i = 0; i < children.length; i++) {\n            const child = children[i];\n            if (\n                (child.wrapper === 'Text' && TEXT_TAGS_IGNORING_ASSOCIATION.indexOf(child.tagName) === -1) &&\n                children.length > 1 &&\n                (!child.parent || TEXT_TAGS_IGNORING_ASSOCIATION.indexOf(child.parent.name) === -1)\n            ) {\n                // Texts outside <p> or not <p> themselves (with siblings)\n                let wrappedTexts = [];\n                for (let j = i; j < children.length; j++) {\n                    // Loop on its next siblings and store them in an array\n                    // until we encounter a block or a <p>\n                    let nextSibling = children[j];\n                    if (nextSibling.wrapper !== 'Text' || TEXT_TAGS_IGNORING_ASSOCIATION.indexOf(nextSibling.tagName) !== -1) {\n                        break;\n                    }\n                    wrappedTexts.push(nextSibling);\n                    // Remove the child that has been nested\n                    children[j] = false;\n                }\n                // Replace the raw text with a <p> that has wrappedTexts as its children\n                if (wrappedTexts.length) {\n                    children[i] = {\n                        attribs: {},\n                        children: wrappedTexts,\n                        nodeIndex: i,\n                        parent: child.parent,\n                        parentTag: child.parentTag,\n                        tagName: 'textwrapper',\n                        wrapper: 'Text'\n                    };\n                }\n            }\n        }\n        return children.filter((parsedNode) => parsedNode !== false && parsedNode !== undefined);\n    }\n\n    /**\n     * Maps the DOM nodes parsed by htmlparser2 into a simple structure that will be easy to render with\n     * native components. It removes ignored tags, chooses the right wrapper for each set of children\n     * to ensure we're not wrapping views inside texts and improves the structure recursively\n     * to prevent erratic rendering.\n     * @param {array} DOMNodes\n     * @param {boolean} [parentTag=false]\n     * @returns\n     * @memberof HTML\n     */\n    mapDOMNodesTORNElements (DOMNodes, parentTag = false, props = this.props) {\n        const { ignoreNodesFunction, ignoredTags, alterNode, alterData, alterChildren, tagsStyles, classesStyles } = props;\n        let RNElements = DOMNodes.map((node, nodeIndex) => {\n            let { children, data } = node;\n            if (ignoreNodesFunction && ignoreNodesFunction(node, parentTag) === true) {\n                return false;\n            }\n            if (ignoredTags.map((tag) => tag.toLowerCase()).indexOf(node.name && node.name.toLowerCase()) !== -1) {\n                return false;\n            }\n\n            if (alterNode) {\n                const alteredNode = alterNode(node);\n                node = alteredNode || node;\n            }\n            const { type, attribs, name, parent } = node;\n\n            if (alterData && data) {\n                const alteredData = alterData(node);\n                data = alteredData || data;\n            }\n            if (alterChildren && children) {\n                const alteredChildren = alterChildren(node);\n                children = alteredChildren || children;\n            }\n            // Remove whitespaces to check if it's just a blank text\n            const strippedData = data && data.replace(/\\s/g, '');\n            if (type === 'text') {\n                if (!strippedData || !strippedData.length) {\n                    // This is blank, don't render an useless additional component\n                    return false;\n                }\n\n                if (\n                    node.parent &&\n                    node.parent.name &&\n                    PREFORMATTED_TAGS.indexOf(node.parent.name) === -1\n                ) {\n                    // Remove line breaks in non-pre-formatted tags\n                    data = data.replace(/(\\r\\n|\\n|\\r)/gm, '');\n                }\n\n                // Text without tags, these can be mapped to the Text wrapper\n                return {\n                    wrapper: 'Text',\n                    data: data,\n                    attribs: attribs || {},\n                    parent,\n                    parentTag: parent && parent.name,\n                    tagName: name || 'rawtext'\n                };\n            }\n            if (type === 'tag') {\n                if (children) {\n                    // Recursively map all children with this method\n                    children = this.associateRawTexts(this.mapDOMNodesTORNElements(children, name));\n                }\n                let wrapper = \"View\";\n                if (this.childrenNeedAView(children)) {\n                    wrapper = \"View\";\n                } else if (this.renderers[name] && this.renderers[name].wrapper) {\n                    wrapper = this.renderers[name].wrapper;\n                } else if (BLOCK_TAGS.indexOf(name.toLowerCase()) !== -1) {\n                    wrapper = \"View\";\n                } else if (TEXT_TAGS.indexOf(name.toLowerCase()) !== -1 || MIXED_TAGS.indexOf(name.toLowerCase()) !== -1) {\n                    wrapper = \"Text\";\n                }\n                return { wrapper, children, attribs, parent, tagName: name, parentTag };\n            }\n        })\n        .filter((parsedNode) => parsedNode !== false && parsedNode !== undefined) // remove useless nodes\n        .map((parsedNode, nodeIndex) => {\n            const { wrapper, children, attribs, tagName } = parsedNode;\n            const firstChild = children && children[0];\n            if (firstChild && children.length === 1) {\n                // Specific tweaks for wrappers with a single child\n                if ((attribs === firstChild.attribs || !firstChild.attribs) &&\n                    firstChild.wrapper === wrapper &&\n                    (tagName === firstChild.tagName || firstChild.tagName === 'rawtext')) {\n                    // If the only child of a node is using the same wrapper, merge them into one\n                    return {\n                        ...parsedNode,\n                        attribs: { ...attribs, ...firstChild.attribs },\n                        data: firstChild.data,\n                        children: [],\n                        tagName,\n                        nodeIndex\n                    };\n                }\n            }\n            return { ...parsedNode, nodeIndex };\n        })\n        .map((parsedNode, nodeIndex) => {\n            const { wrapper, attribs, tagName, children } = parsedNode;\n            if (wrapper === 'View' && attribs && this.wrapperHasTextChild(children)) {\n                // When encountering a View wrapper that has some styles and also Text children,\n                // let's filter out text-only styles and apply those to *all* Text children and\n                // remove them from the wrapper, mimicking browsers' behaviour better.\n                const wrapperStyles = {\n                    ...(tagsStyles[tagName] || {}),\n                    ...(_getElementClassStyles(attribs, classesStyles)),\n                    ...cssStringToObject(attribs.style || '')\n                };\n\n                let textChildrenInheritedStyles = {};\n                Object.keys(wrapperStyles).forEach((styleKey) => {\n                    // Extract text-only styles\n                    if (TextOnlyPropTypes.indexOf(styleKey) !== -1) {\n                        textChildrenInheritedStyles[styleKey] = wrapperStyles[styleKey];\n                        delete wrapperStyles[styleKey];\n                    }\n                });\n                if (Object.keys(textChildrenInheritedStyles).length === 0) {\n                    // No style to apply to text children, avoid unecessary loops\n                    return parsedNode;\n                }\n                // Re-write wrapper's styles as a string\n                parsedNode.attribs.style = cssObjectToString(wrapperStyles);\n                for (let i = 0; i < children.length; i++) {\n                    const child = children[i];\n                    const { wrapper, attribs } = child;\n\n                    if (wrapper === 'Text') {\n                        // Set (or merge) the inherited text styles extracted from the wrapper for\n                        // each Text child\n                        if (!attribs.style) {\n                            child.attribs.style = cssObjectToString(textChildrenInheritedStyles);\n                        } else {\n                            child.attribs.style = cssObjectToString({\n                                ...textChildrenInheritedStyles,\n                                ...cssStringToObject(child.attribs.style)\n                            });\n                        }\n                    }\n                }\n            }\n            return parsedNode;\n        });\n        return this.associateRawTexts(RNElements);\n    }\n\n    /**\n     * Takes the parsed nodes from mapDOMNodesTORNElements and actually renders native components.\n     * Calls the utils that convert the CSS into react-native compatible styles and renders custom\n     * components when needed.\n     * @param {boolean} RNElements\n     * @param {string} [parentWrapper='root']\n     * @param {number} [parentIndex=0]\n     * @returns {array}\n     * @memberof HTML\n     */\n    renderRNElements (RNElements, parentWrapper = 'root', parentIndex = 0, props = this.props) {\n        const {\n            allowFontScaling,\n            allowedStyles,\n            baseFontStyle,\n            classesStyles,\n            emSize,\n            ignoredStyles,\n            ptSize,\n            tagsStyles,\n            textSelectable\n        } = props;\n\n        return RNElements && RNElements.length ? RNElements.map((element, index) => {\n            const { attribs, data, tagName, parentTag, children, nodeIndex, wrapper } = element;\n            const Wrapper = wrapper === 'Text' ? Text : View;\n            const key = `${wrapper}-${parentIndex}-${nodeIndex}-${tagName}-${index}-${parentTag}`;\n            const convertedCSSStyles =\n                attribs && attribs.style ?\n                    cssStringToRNStyle(\n                        attribs.style,\n                        Wrapper === Text ? STYLESETS.TEXT : STYLESETS.VIEW, // proper prop-types validation\n                        { parentTag: tagName, emSize, ptSize, ignoredStyles, allowedStyles }\n                    ) :\n                    {};\n\n            const childElements = children && children.length ?\n                children.map((child, childIndex) => this.renderRNElements([child], wrapper, index, props)) :\n                false;\n\n            const renderersProps = {};\n            if (Wrapper === Text) {\n                renderersProps.allowFontScaling = allowFontScaling;\n                renderersProps.selectable = this.props.textSelectable;\n            }\n\n            if (this.renderers[tagName]) {\n                const customRenderer =\n                    typeof this.renderers[tagName] === 'function' ?\n                        this.renderers[tagName] :\n                        this.renderers[tagName].renderer;\n\n                if (!customRenderer || typeof customRenderer !== 'function') {\n                    console.warn(`Custom renderer for ${tagName} supplied incorrectly. Please check out the docs.`);\n                    return undefined;\n                }\n                // If a custom renderer is available for this tag\n                return customRenderer(\n                    attribs,\n                    childElements,\n                    convertedCSSStyles,\n                    {\n                        ...props,\n                        parentWrapper: wrapper,\n                        parentTag,\n                        nodeIndex,\n                        parentIndex,\n                        key,\n                        data,\n                        rawChildren: children,\n                        ...renderersProps\n                    });\n            }\n\n            const classStyles = _getElementClassStyles(attribs, classesStyles);\n            const textElement = data ?\n                <Text\n                  allowFontScaling={allowFontScaling}\n                  style={computeTextStyles(\n                      element,\n                      {\n                          defaultTextStyles: this.defaultTextStyles,\n                          tagsStyles,\n                          classesStyles,\n                          baseFontStyle,\n                          emSize,\n                          ptSize,\n                          ignoredStyles,\n                          allowedStyles\n                      })}\n                >\n                    { data }\n                </Text> :\n                false;\n\n            const style = [\n                (!tagsStyles || !tagsStyles[tagName]) ? (Wrapper === Text ? this.defaultTextStyles : this.defaultBlockStyles)[tagName] : undefined,\n                tagsStyles ? tagsStyles[tagName] : undefined,\n                classStyles,\n                convertedCSSStyles\n            ]\n            .filter((s) => s !== undefined);\n\n            return (\n                <Wrapper key={key} style={style} {...renderersProps}>\n                    { textElement }\n                    { childElements }\n                </Wrapper>\n            );\n        }) : false;\n    }\n\n    render () {\n        const { allowFontScaling, customWrapper, remoteLoadingView, remoteErrorView } = this.props;\n        const { RNNodes, loadingRemoteURL, errorLoadingRemoteURL } = this.state;\n        if (!RNNodes && !loadingRemoteURL && !errorLoadingRemoteURL) {\n            return null;\n        } else if (loadingRemoteURL) {\n            return remoteLoadingView ?\n                remoteLoadingView(this.props, this.state) :\n                (\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <ActivityIndicator />\n                    </View>\n                );\n        } else if (errorLoadingRemoteURL) {\n            return remoteErrorView ?\n                remoteErrorView(this.props, this.state) :\n                (\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <Text allowFontScaling={allowFontScaling} style={{ fontStyle: 'italic', fontSize: 16 }}>Could not load { this.props.uri }</Text>\n                    </View>\n                );\n        }\n\n        return customWrapper ? customWrapper(RNNodes) : (\n            <View style={this.props.containerStyle || {}}>\n                { RNNodes }\n            </View>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}