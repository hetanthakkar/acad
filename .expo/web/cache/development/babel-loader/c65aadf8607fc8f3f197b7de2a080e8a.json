{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _readOnlyError from \"@babel/runtime/helpers/readOnlyError\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\codemaxx\\\\Desktop\\\\iBlood\\\\screens\\\\Contacts.js\",\n    _class,\n    _temp;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Asset, LinearGradient, WebBrowser, Video } from 'expo';\nimport { BorderlessButton, RectButton } from 'react-native-gesture-handler';\nimport { NavigationActions } from 'react-navigation';\nimport FadeIn from 'react-native-fade-in-image';\nimport { View as AnimatableView } from 'react-native-animatable';\nimport { Ionicons } from '@expo/vector-icons';\nimport { withNavigation } from 'react-navigation';\nimport MyContacts from \"../components/MyContacts\";\nimport NavigationBar from \"../components/NavigationBar\";\nimport MenuButton from \"../components/MenuButton\";\nimport VideoBackground from \"../components/VideoBackground\";\nimport { BoldText, SemiBoldText } from \"../components/StyledText\";\nimport { connectDrawerButton } from \"../Navigation\";\nimport { Colors, FontSizes, Layout } from \"../constants\";\nimport { Speakers, Talks } from \"../data\";\nimport { HideWhenConferenceHasStarted, HideWhenConferenceHasEnded, ShowWhenConferenceHasEnded } from \"../utils\";\n\nvar Contacts = function (_React$Component) {\n  _inherits(Contacts, _React$Component);\n\n  var _super = _createSuper(Contacts);\n\n  function Contacts() {\n    _classCallCheck(this, Contacts);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Contacts, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 7\n        }\n      }, React.createElement(ScrollView, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 9\n        }\n      }, React.createElement(DeferredContactsContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return Contacts;\n}(React.Component);\n\nvar DeferredContactsContent = withNavigation(_class = (_temp = function (_React$Component2) {\n  _inherits(DeferredContactsContent, _React$Component2);\n\n  var _super2 = _createSuper(DeferredContactsContent);\n\n  _createClass(DeferredContactsContent, [{\n    key: \"getTickets\",\n    value: function getTickets() {\n      var value, _value;\n\n      return _regeneratorRuntime.async(function getTickets$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@MySuperStore2019:contacts'));\n\n            case 3:\n              value = _context.sent;\n\n              if (value === null) {\n                value = (_readOnlyError(\"value\"), '[]');\n              }\n\n              this.setState({\n                contacts: JSON.parse(value)\n              });\n              _context.next = 12;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n              this.setState({\n                contacts: []\n              });\n\n            case 12:\n              _context.prev = 12;\n              _context.next = 15;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@MySuperStore2019:tickets'));\n\n            case 15:\n              _value = _context.sent;\n              console.log('GETTING tickets', _value);\n              this.setState({\n                tickets: JSON.parse(_value)\n              });\n              this.tickets = JSON.parse(_value);\n              _context.next = 25;\n              break;\n\n            case 21:\n              _context.prev = 21;\n              _context.t1 = _context[\"catch\"](12);\n              console.log(_context.t1);\n              return _context.abrupt(\"return\", []);\n\n            case 25:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, [[0, 8], [12, 21]], Promise);\n    }\n  }]);\n\n  function DeferredContactsContent(props) {\n    var _this;\n\n    _classCallCheck(this, DeferredContactsContent);\n\n    _this = _super2.call(this, props);\n    _this.state = {\n      ready: Platform.OS === 'android' ? false : true,\n      tickets: [],\n      contacts: []\n    };\n\n    _this._handlePressQRButton = function () {\n      _this.props.navigation.navigate({\n        routeName: 'QRContactScanner',\n        key: 'QRContactScanner'\n      });\n    };\n\n    _this._handlePressProfileQRButton = function () {\n      _this.props.navigation.navigate({\n        routeName: 'QRScanner',\n        key: 'QRScanner'\n      });\n    };\n\n    _this.tickets = [];\n    return _this;\n  }\n\n  _createClass(DeferredContactsContent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this._sub = this.props.navigation.addListener('didFocus', this.getTickets.bind(this));\n\n      if (this.state.ready) {\n        return;\n      }\n\n      setTimeout(function () {\n        _this2.setState({\n          ready: true\n        });\n      }, 200);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._sub.remove();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.state.ready) {\n        return null;\n      }\n\n      console.log('state', this.state);\n      var tix = this.state.tickets || [];\n      return React.createElement(AnimatableView, {\n        animation: \"fadeIn\",\n        useNativeDriver: true,\n        duration: 800,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 7\n        }\n      }, React.createElement(MyContacts, {\n        contacts: this.state.contacts,\n        tickets: this.state.tickets,\n        style: {\n          marginTop: 20,\n          marginHorizontal: 15,\n          marginBottom: 2\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }\n      }), tix && tix.length > 0 ? React.createElement(ClipBorderRadius, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }\n      }, React.createElement(RectButton, {\n        style: styles.bigButton,\n        onPress: this._handlePressQRButton,\n        underlayColor: \"#fff\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }\n      }, React.createElement(SemiBoldText, {\n        style: styles.bigButtonText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 15\n        }\n      }, \"Scan a contact's QR code\"))) : React.createElement(ClipBorderRadius, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }\n      }, React.createElement(RectButton, {\n        style: styles.bigButton,\n        onPress: this._handlePressProfileQRButton,\n        underlayColor: \"#fff\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }\n      }, React.createElement(SemiBoldText, {\n        style: styles.bigButtonText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 15\n        }\n      }, \"You need to scan your ticket first\"))));\n    }\n  }]);\n\n  return DeferredContactsContent;\n}(React.Component), _temp)) || _class;\n\nvar ClipBorderRadius = function ClipBorderRadius(_ref) {\n  var children = _ref.children,\n      style = _ref.style;\n  return React.createElement(View, {\n    style: [{\n      borderRadius: BORDER_RADIUS,\n      overflow: 'hidden'\n    }, style],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 5\n    }\n  }, children);\n};\n\nvar BORDER_RADIUS = 3;\nvar styles = StyleSheet.create({\n  headerText: {\n    color: '#fff',\n    textAlign: 'center',\n    fontSize: 17,\n    lineHeight: 17 * 1.5\n  },\n  headerSmallText: {\n    color: '#fff',\n    textAlign: 'center',\n    fontSize: 7,\n    lineHeight: 7 * 1.5\n  },\n  bigButton: {\n    backgroundColor: Colors.blue,\n    paddingHorizontal: 15,\n    height: 50,\n    marginHorizontal: 15,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: BORDER_RADIUS,\n    overflow: 'hidden',\n    flexDirection: 'row'\n  },\n  bigButtonText: {\n    fontSize: FontSizes.normalButton,\n    color: '#fff',\n    textAlign: 'center'\n  },\n  seeAllTalks: {\n    fontSize: FontSizes.normalButton,\n    color: Colors.blue\n  }\n});\nexport default Contacts;","map":{"version":3,"sources":["C:/Users/codemaxx/Desktop/iBlood/screens/Contacts.js"],"names":["React","Asset","LinearGradient","WebBrowser","Video","BorderlessButton","RectButton","NavigationActions","FadeIn","View","AnimatableView","Ionicons","withNavigation","MyContacts","NavigationBar","MenuButton","VideoBackground","BoldText","SemiBoldText","connectDrawerButton","Colors","FontSizes","Layout","Speakers","Talks","HideWhenConferenceHasStarted","HideWhenConferenceHasEnded","ShowWhenConferenceHasEnded","Contacts","flex","Component","DeferredContactsContent","AsyncStorage","getItem","value","setState","contacts","JSON","parse","console","log","tickets","props","state","ready","Platform","OS","_handlePressQRButton","navigation","navigate","routeName","key","_handlePressProfileQRButton","_sub","addListener","getTickets","bind","setTimeout","remove","tix","marginTop","marginHorizontal","marginBottom","length","styles","bigButton","bigButtonText","ClipBorderRadius","children","style","borderRadius","BORDER_RADIUS","overflow","StyleSheet","create","headerText","color","textAlign","fontSize","lineHeight","headerSmallText","backgroundColor","blue","paddingHorizontal","height","alignItems","justifyContent","flexDirection","normalButton","seeAllTalks"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {\r\n  Animated,\r\n  Linking,\r\n  Platform,\r\n  StyleSheet,\r\n  ScrollView,\r\n  AsyncStorage,\r\n  View,\r\n} from 'react-native';\r\nimport {Asset, LinearGradient, WebBrowser, Video} from 'expo';\r\nimport {BorderlessButton, RectButton} from 'react-native-gesture-handler';\r\nimport {NavigationActions} from 'react-navigation';\r\nimport FadeIn from 'react-native-fade-in-image';\r\nimport {View as AnimatableView} from 'react-native-animatable';\r\nimport {Ionicons} from '@expo/vector-icons';\r\nimport {withNavigation} from 'react-navigation';\r\n\r\nimport MyContacts from '../components/MyContacts';\r\nimport NavigationBar from '../components/NavigationBar';\r\nimport MenuButton from '../components/MenuButton';\r\nimport VideoBackground from '../components/VideoBackground';\r\nimport {BoldText, SemiBoldText} from '../components/StyledText';\r\nimport {connectDrawerButton} from '../Navigation';\r\nimport {Colors, FontSizes, Layout} from '../constants';\r\nimport {Speakers, Talks} from '../data';\r\nimport {\r\n  HideWhenConferenceHasStarted,\r\n  HideWhenConferenceHasEnded,\r\n  ShowWhenConferenceHasEnded,\r\n} from '../utils';\r\n\r\nclass Contacts extends React.Component {\r\n  render() {\r\n    return (\r\n      <View style={{flex: 1}}>\r\n        <ScrollView style={{flex: 1}}>\r\n          <DeferredContactsContent />\r\n        </ScrollView>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\n@withNavigation\r\nclass DeferredContactsContent extends React.Component {\r\n  state = {\r\n    ready: Platform.OS === 'android' ? false : true,\r\n    tickets: [],\r\n    contacts: [],\r\n  };\r\n\r\n  async getTickets() {\r\n    try {\r\n      const value = await AsyncStorage.getItem('@MySuperStore2019:contacts');\r\n      if (value === null) {\r\n        value = '[]';\r\n      }\r\n      this.setState({contacts: JSON.parse(value)});\r\n    } catch (err) {\r\n      console.log(err);\r\n      this.setState({contacts: []});\r\n    }\r\n    try {\r\n      const value = await AsyncStorage.getItem('@MySuperStore2019:tickets');\r\n\r\n      console.log('GETTING tickets', value);\r\n      this.setState({tickets: JSON.parse(value)});\r\n      this.tickets = JSON.parse(value);\r\n    } catch (err) {\r\n      console.log(err);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.tickets = [];\r\n  }\r\n\r\n  componentDidMount() {\r\n    this._sub = this.props.navigation.addListener(\r\n      'didFocus',\r\n      this.getTickets.bind(this)\r\n    );\r\n    if (this.state.ready) {\r\n      return;\r\n    }\r\n\r\n    setTimeout(() => {\r\n      this.setState({ready: true});\r\n    }, 200);\r\n  }\r\n  componentWillUnmount() {\r\n    this._sub.remove();\r\n  }\r\n  render() {\r\n    if (!this.state.ready) {\r\n      return null;\r\n    }\r\n    console.log('state', this.state);\r\n    const tix = this.state.tickets || [];\r\n    return (\r\n      <AnimatableView animation=\"fadeIn\" useNativeDriver duration={800}>\r\n        <MyContacts\r\n          contacts={this.state.contacts}\r\n          tickets={this.state.tickets}\r\n          style={{marginTop: 20, marginHorizontal: 15, marginBottom: 2}}\r\n        />\r\n        {tix && tix.length > 0 ? (\r\n          <ClipBorderRadius>\r\n            <RectButton\r\n              style={styles.bigButton}\r\n              onPress={this._handlePressQRButton}\r\n              underlayColor=\"#fff\">\r\n              <SemiBoldText style={styles.bigButtonText}>\r\n                {\"Scan a contact's QR code\"}\r\n              </SemiBoldText>\r\n            </RectButton>\r\n          </ClipBorderRadius>\r\n        ) : (\r\n          <ClipBorderRadius>\r\n            <RectButton\r\n              style={styles.bigButton}\r\n              onPress={this._handlePressProfileQRButton}\r\n              underlayColor=\"#fff\">\r\n              <SemiBoldText style={styles.bigButtonText}>\r\n                You need to scan your ticket first\r\n              </SemiBoldText>\r\n            </RectButton>\r\n          </ClipBorderRadius>\r\n        )}\r\n      </AnimatableView>\r\n    );\r\n  }\r\n\r\n  _handlePressQRButton = () => {\r\n    this.props.navigation.navigate({\r\n      routeName: 'QRContactScanner',\r\n      key: 'QRContactScanner',\r\n    });\r\n  };\r\n\r\n  _handlePressProfileQRButton = () => {\r\n    this.props.navigation.navigate({\r\n      routeName: 'QRScanner',\r\n      key: 'QRScanner',\r\n    });\r\n  };\r\n}\r\n\r\nconst ClipBorderRadius = ({children, style}) => {\r\n  return (\r\n    <View style={[{borderRadius: BORDER_RADIUS, overflow: 'hidden'}, style]}>\r\n      {children}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst BORDER_RADIUS = 3;\r\n\r\nconst styles = StyleSheet.create({\r\n  headerText: {\r\n    color: '#fff',\r\n    textAlign: 'center',\r\n    fontSize: 17,\r\n    lineHeight: 17 * 1.5,\r\n  },\r\n  headerSmallText: {\r\n    color: '#fff',\r\n    textAlign: 'center',\r\n    fontSize: 7,\r\n    lineHeight: 7 * 1.5,\r\n  },\r\n  bigButton: {\r\n    backgroundColor: Colors.blue,\r\n    paddingHorizontal: 15,\r\n    height: 50,\r\n    marginHorizontal: 15,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    borderRadius: BORDER_RADIUS,\r\n    overflow: 'hidden',\r\n    flexDirection: 'row',\r\n  },\r\n  bigButtonText: {\r\n    fontSize: FontSizes.normalButton,\r\n    color: '#fff',\r\n    textAlign: 'center',\r\n  },\r\n  seeAllTalks: {\r\n    fontSize: FontSizes.normalButton,\r\n    color: Colors.blue,\r\n  },\r\n});\r\n\r\nexport default Contacts;\r\n"]},"metadata":{},"sourceType":"module"}