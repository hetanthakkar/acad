{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\codemaxx\\\\Desktop\\\\iBlood\\\\screens\\\\Profile.js\",\n    _class,\n    _temp;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport { Permissions } from 'expo';\nimport { RectButton } from 'react-native-gesture-handler';\nimport { View as AnimatableView } from 'react-native-animatable';\nimport { withNavigation } from 'react-navigation';\nimport NavigationBar from \"../components/NavigationBar\";\nimport Tickets from \"../components/Tickets\";\nimport MenuButton from \"../components/MenuButton\";\nimport { SemiBoldText } from \"../components/StyledText\";\nimport { Colors, FontSizes, Layout } from \"../constants\";\n\nvar Profile = function (_React$Component) {\n  _inherits(Profile, _React$Component);\n\n  var _super = _createSuper(Profile);\n\n  function Profile() {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      hasCameraPermission: null\n    };\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 7\n        }\n      }, React.createElement(ScrollView, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 9\n        }\n      }, React.createElement(DeferredProfileContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return Profile;\n}(React.Component);\n\nvar DeferredProfileContent = withNavigation(_class = (_temp = function (_React$Component2) {\n  _inherits(DeferredProfileContent, _React$Component2);\n\n  var _super2 = _createSuper(DeferredProfileContent);\n\n  function DeferredProfileContent(props) {\n    var _this2;\n\n    _classCallCheck(this, DeferredProfileContent);\n\n    _this2 = _super2.call(this, props);\n    _this2.state = {\n      tickets: [],\n      ready: Platform.OS === 'android' ? false : true\n    };\n\n    _this2.getTickets = function _callee() {\n      var value, tickets;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@MySuperStore2019:tickets'));\n\n            case 3:\n              value = _context.sent;\n              tickets = JSON.parse(value);\n\n              _this2.setState({\n                tickets: tickets\n              });\n\n              _context.next = 12;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n              return _context.abrupt(\"return\", []);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 8]], Promise);\n    };\n\n    _this2._requestCameraPermission = function _callee2() {\n      var _await$Permissions$as, status, hasCameraPermission;\n\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));\n\n            case 2:\n              _await$Permissions$as = _context2.sent;\n              status = _await$Permissions$as.status;\n              hasCameraPermission = status === 'granted';\n\n              _this2.setState({\n                hasCameraPermission: hasCameraPermission\n              });\n\n              return _context2.abrupt(\"return\", hasCameraPermission);\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this2._handlePressQRButton = function _callee3() {\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(_this2._requestCameraPermission());\n\n            case 2:\n              if (!_context3.sent) {\n                _context3.next = 6;\n                break;\n              }\n\n              _this2.props.navigation.navigate({\n                routeName: 'QRScanner',\n                key: 'QRScanner'\n              });\n\n              _context3.next = 7;\n              break;\n\n            case 6:\n              alert('You need to manually enable camera permissions in your operating system settings app');\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    props.navigation.addListener('didFocus', function () {\n      _this2.getTickets();\n    });\n\n    _this2.getTickets();\n\n    return _this2;\n  }\n\n  _createClass(DeferredProfileContent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      if (this.state.ready) {\n        return;\n      }\n\n      setTimeout(function () {\n        _this3.setState({\n          ready: true\n        });\n      }, 200);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var tickets = this.state.tickets || [];\n\n      if (!this.state.ready) {\n        return null;\n      }\n\n      return React.createElement(AnimatableView, {\n        animation: \"fadeIn\",\n        useNativeDriver: true,\n        duration: 800,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 7\n        }\n      }, React.createElement(Tickets, {\n        tickets: this.state.tickets,\n        style: {\n          marginTop: 20,\n          marginHorizontal: 15,\n          marginBottom: 2\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }\n      }), React.createElement(ClipBorderRadius, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }\n      }, React.createElement(RectButton, {\n        style: styles.bigButton,\n        onPress: this._handlePressQRButton,\n        underlayColor: \"#fff\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }\n      }, React.createElement(SemiBoldText, {\n        style: styles.bigButtonText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }\n      }, tickets.length > 0 ? 'Scan another ticket QR code' : 'Scan your ticket QR code'))));\n    }\n  }]);\n\n  return DeferredProfileContent;\n}(React.Component), _temp)) || _class;\n\nvar OverscrollView = function OverscrollView() {\n  return React.createElement(View, {\n    style: {\n      position: 'absolute',\n      top: -400,\n      height: 400,\n      left: 0,\n      right: 0\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 3\n    }\n  });\n};\n\nvar ClipBorderRadius = function ClipBorderRadius(_ref) {\n  var children = _ref.children,\n      style = _ref.style;\n  return React.createElement(View, {\n    style: [{\n      borderRadius: BORDER_RADIUS,\n      overflow: 'hidden',\n      marginTop: 10\n    }, style],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  }, children);\n};\n\nvar BORDER_RADIUS = 3;\nvar styles = StyleSheet.create({\n  headerContent: {\n    alignItems: 'center',\n    marginTop: 5,\n    paddingVertical: 10\n  },\n  headerVideoLayer: _objectSpread({}, StyleSheet.absoluteFillObject),\n  headerVideoOverlay: _objectSpread(_objectSpread({}, StyleSheet.absoluteFillObject), {}, {\n    backgroundColor: Colors.blue,\n    opacity: 0.8\n  }),\n  headerText: {\n    color: '#fff',\n    textAlign: 'center',\n    fontSize: 17,\n    lineHeight: 17 * 1.5\n  },\n  headerSmallText: {\n    color: '#fff',\n    textAlign: 'center',\n    fontSize: 7,\n    lineHeight: 7 * 1.5\n  },\n  bigButton: {\n    backgroundColor: Colors.blue,\n    paddingHorizontal: 15,\n    height: 50,\n    marginHorizontal: 15,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: BORDER_RADIUS,\n    overflow: 'hidden',\n    flexDirection: 'row'\n  },\n  bigButtonText: {\n    fontSize: FontSizes.normalButton,\n    color: '#fff',\n    textAlign: 'center'\n  },\n  seeAllTalks: {\n    fontSize: FontSizes.normalButton,\n    color: Colors.blue\n  }\n});\nexport default Profile;","map":{"version":3,"sources":["C:/Users/codemaxx/Desktop/iBlood/screens/Profile.js"],"names":["React","Permissions","RectButton","View","AnimatableView","withNavigation","NavigationBar","Tickets","MenuButton","SemiBoldText","Colors","FontSizes","Layout","Profile","state","hasCameraPermission","flex","Component","DeferredProfileContent","props","tickets","ready","Platform","OS","getTickets","AsyncStorage","getItem","value","JSON","parse","setState","console","log","_requestCameraPermission","askAsync","CAMERA","status","_handlePressQRButton","navigation","navigate","routeName","key","alert","addListener","setTimeout","marginTop","marginHorizontal","marginBottom","styles","bigButton","bigButtonText","length","OverscrollView","position","top","height","left","right","ClipBorderRadius","children","style","borderRadius","BORDER_RADIUS","overflow","StyleSheet","create","headerContent","alignItems","paddingVertical","headerVideoLayer","absoluteFillObject","headerVideoOverlay","backgroundColor","blue","opacity","headerText","color","textAlign","fontSize","lineHeight","headerSmallText","paddingHorizontal","justifyContent","flexDirection","normalButton","seeAllTalks"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {\r\n  Animated,\r\n  Linking,\r\n  Platform,\r\n  StyleSheet,\r\n  ScrollView,\r\n  View,\r\n  AsyncStorage,\r\n} from 'react-native';\r\nimport {Permissions} from 'expo';\r\nimport {RectButton} from 'react-native-gesture-handler';\r\nimport {View as AnimatableView} from 'react-native-animatable';\r\nimport {withNavigation} from 'react-navigation';\r\n\r\nimport NavigationBar from '../components/NavigationBar';\r\nimport Tickets from '../components/Tickets';\r\nimport MenuButton from '../components/MenuButton';\r\nimport {SemiBoldText} from '../components/StyledText';\r\nimport {Colors, FontSizes, Layout} from '../constants';\r\n\r\nclass Profile extends React.Component {\r\n  state = {\r\n    hasCameraPermission: null,\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <View style={{flex: 1}}>\r\n        <ScrollView style={{flex: 1}}>\r\n          <DeferredProfileContent />\r\n        </ScrollView>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\n@withNavigation\r\nclass DeferredProfileContent extends React.Component {\r\n  state = {\r\n    tickets: [],\r\n    ready: Platform.OS === 'android' ? false : true,\r\n  };\r\n\r\n  getTickets = async () => {\r\n    try {\r\n      const value = await AsyncStorage.getItem('@MySuperStore2019:tickets');\r\n      const tickets = JSON.parse(value);\r\n      this.setState({tickets});\r\n    } catch (err) {\r\n      console.log(err);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    props.navigation.addListener('didFocus', () => {\r\n      this.getTickets();\r\n    });\r\n    this.getTickets();\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.state.ready) {\r\n      return;\r\n    }\r\n\r\n    setTimeout(() => {\r\n      this.setState({ready: true});\r\n    }, 200);\r\n  }\r\n\r\n  render() {\r\n    let tickets = this.state.tickets || [];\r\n    if (!this.state.ready) {\r\n      return null;\r\n    }\r\n    return (\r\n      <AnimatableView animation=\"fadeIn\" useNativeDriver duration={800}>\r\n        <Tickets\r\n          tickets={this.state.tickets}\r\n          style={{marginTop: 20, marginHorizontal: 15, marginBottom: 2}}\r\n        />\r\n\r\n        <ClipBorderRadius>\r\n          <RectButton\r\n            style={styles.bigButton}\r\n            onPress={this._handlePressQRButton}\r\n            underlayColor=\"#fff\">\r\n            <SemiBoldText style={styles.bigButtonText}>\r\n              {tickets.length > 0\r\n                ? 'Scan another ticket QR code'\r\n                : 'Scan your ticket QR code'}\r\n            </SemiBoldText>\r\n          </RectButton>\r\n        </ClipBorderRadius>\r\n      </AnimatableView>\r\n    );\r\n  }\r\n  _requestCameraPermission = async () => {\r\n    const {status} = await Permissions.askAsync(Permissions.CAMERA);\r\n    let hasCameraPermission = status === 'granted';\r\n    this.setState({hasCameraPermission});\r\n    return hasCameraPermission;\r\n  };\r\n\r\n  _handlePressQRButton = async () => {\r\n    if (await this._requestCameraPermission()) {\r\n      this.props.navigation.navigate({\r\n        routeName: 'QRScanner',\r\n        key: 'QRScanner',\r\n      });\r\n    } else {\r\n      alert(\r\n        'You need to manually enable camera permissions in your operating system settings app'\r\n      );\r\n    }\r\n  };\r\n}\r\n\r\nconst OverscrollView = () => (\r\n  <View\r\n    style={{\r\n      position: 'absolute',\r\n      top: -400,\r\n      height: 400,\r\n      left: 0,\r\n      right: 0,\r\n    }}\r\n  />\r\n);\r\n\r\nconst ClipBorderRadius = ({children, style}) => {\r\n  return (\r\n    <View\r\n      style={[\r\n        {borderRadius: BORDER_RADIUS, overflow: 'hidden', marginTop: 10},\r\n        style,\r\n      ]}>\r\n      {children}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst BORDER_RADIUS = 3;\r\n\r\nconst styles = StyleSheet.create({\r\n  headerContent: {\r\n    alignItems: 'center',\r\n    marginTop: 5,\r\n    paddingVertical: 10,\r\n  },\r\n  headerVideoLayer: {\r\n    ...StyleSheet.absoluteFillObject,\r\n  },\r\n  headerVideoOverlay: {\r\n    ...StyleSheet.absoluteFillObject,\r\n    backgroundColor: Colors.blue,\r\n    opacity: 0.8,\r\n  },\r\n  headerText: {\r\n    color: '#fff',\r\n    textAlign: 'center',\r\n    fontSize: 17,\r\n    lineHeight: 17 * 1.5,\r\n  },\r\n  headerSmallText: {\r\n    color: '#fff',\r\n    textAlign: 'center',\r\n    fontSize: 7,\r\n    lineHeight: 7 * 1.5,\r\n  },\r\n  bigButton: {\r\n    backgroundColor: Colors.blue,\r\n    paddingHorizontal: 15,\r\n    height: 50,\r\n    marginHorizontal: 15,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    borderRadius: BORDER_RADIUS,\r\n    overflow: 'hidden',\r\n    flexDirection: 'row',\r\n  },\r\n  bigButtonText: {\r\n    fontSize: FontSizes.normalButton,\r\n    color: '#fff',\r\n    textAlign: 'center',\r\n  },\r\n  seeAllTalks: {\r\n    fontSize: FontSizes.normalButton,\r\n    color: Colors.blue,\r\n  },\r\n});\r\n\r\nexport default Profile;\r\n"]},"metadata":{},"sourceType":"module"}