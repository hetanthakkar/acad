{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import PropTypes from'prop-types';import React from'react';import Platform from\"react-native-web/dist/exports/Platform\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TextInput from\"react-native-web/dist/exports/TextInput\";import{MIN_COMPOSER_HEIGHT,DEFAULT_PLACEHOLDER}from\"./Constant\";import Color from\"./Color\";import{StylePropType}from\"./utils\";var styles=StyleSheet.create({textInput:_objectSpread(_objectSpread({flex:1,marginLeft:10,fontSize:16,lineHeight:16},Platform.select({web:{paddingTop:6,paddingLeft:4}})),{},{marginTop:Platform.select({ios:6,android:0,web:6}),marginBottom:Platform.select({ios:5,android:3,web:4})})});var Composer=function(_React$Component){_inherits(Composer,_React$Component);var _super=_createSuper(Composer);function Composer(){var _this;_classCallCheck(this,Composer);_this=_super.apply(this,arguments);_this.contentSize=undefined;_this.onContentSizeChange=function(e){var contentSize=e.nativeEvent.contentSize;if(!contentSize){return;}if(!_this.contentSize||_this.contentSize&&(_this.contentSize.width!==contentSize.width||_this.contentSize.height!==contentSize.height)){_this.contentSize=contentSize;_this.props.onInputSizeChanged(_this.contentSize);}};_this.onChangeText=function(text){_this.props.onTextChanged(text);};return _this;}_createClass(Composer,[{key:\"render\",value:function render(){return React.createElement(TextInput,_extends({testID:this.props.placeholder,accessible:true,accessibilityLabel:this.props.placeholder,placeholder:this.props.placeholder,placeholderTextColor:this.props.placeholderTextColor,multiline:this.props.multiline,editable:!this.props.disableComposer,onChange:this.onContentSizeChange,onContentSizeChange:this.onContentSizeChange,onChangeText:this.onChangeText,style:[styles.textInput,this.props.textInputStyle,_objectSpread({height:this.props.composerHeight},Platform.select({web:{outlineWidth:0,outlineColor:'transparent',outlineOffset:0}}))],autoFocus:this.props.textInputAutoFocus,value:this.props.text,enablesReturnKeyAutomatically:true,underlineColorAndroid:\"transparent\",keyboardAppearance:this.props.keyboardAppearance},this.props.textInputProps));}}]);return Composer;}(React.Component);export{Composer as default};Composer.defaultProps={composerHeight:MIN_COMPOSER_HEIGHT,text:'',placeholderTextColor:Color.defaultColor,placeholder:DEFAULT_PLACEHOLDER,textInputProps:null,multiline:true,disableComposer:false,textInputStyle:{},textInputAutoFocus:false,keyboardAppearance:'default',onTextChanged:function onTextChanged(){},onInputSizeChanged:function onInputSizeChanged(){}};Composer.propTypes={composerHeight:PropTypes.number,text:PropTypes.string,placeholder:PropTypes.string,placeholderTextColor:PropTypes.string,textInputProps:PropTypes.object,onTextChanged:PropTypes.func,onInputSizeChanged:PropTypes.func,multiline:PropTypes.bool,disableComposer:PropTypes.bool,textInputStyle:StylePropType,textInputAutoFocus:PropTypes.bool,keyboardAppearance:PropTypes.string};","map":{"version":3,"sources":["../src/Composer.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Platform, StyleSheet, TextInput } from 'react-native';\nimport { MIN_COMPOSER_HEIGHT, DEFAULT_PLACEHOLDER } from './Constant';\nimport Color from './Color';\nimport { StylePropType } from './utils';\nconst styles = StyleSheet.create({\n    textInput: {\n        flex: 1,\n        marginLeft: 10,\n        fontSize: 16,\n        lineHeight: 16,\n        ...Platform.select({\n            web: {\n                paddingTop: 6,\n                paddingLeft: 4,\n            },\n        }),\n        marginTop: Platform.select({\n            ios: 6,\n            android: 0,\n            web: 6,\n        }),\n        marginBottom: Platform.select({\n            ios: 5,\n            android: 3,\n            web: 4,\n        }),\n    },\n});\nexport default class Composer extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.contentSize = undefined;\n        this.onContentSizeChange = (e) => {\n            const { contentSize } = e.nativeEvent;\n            // Support earlier versions of React Native on Android.\n            if (!contentSize) {\n                return;\n            }\n            if (!this.contentSize ||\n                (this.contentSize &&\n                    (this.contentSize.width !== contentSize.width ||\n                        this.contentSize.height !== contentSize.height))) {\n                this.contentSize = contentSize;\n                this.props.onInputSizeChanged(this.contentSize);\n            }\n        };\n        this.onChangeText = (text) => {\n            this.props.onTextChanged(text);\n        };\n    }\n    render() {\n        return (<TextInput testID={this.props.placeholder} accessible accessibilityLabel={this.props.placeholder} placeholder={this.props.placeholder} placeholderTextColor={this.props.placeholderTextColor} multiline={this.props.multiline} editable={!this.props.disableComposer} onChange={this.onContentSizeChange} onContentSizeChange={this.onContentSizeChange} onChangeText={this.onChangeText} style={[\n            styles.textInput,\n            this.props.textInputStyle,\n            {\n                height: this.props.composerHeight,\n                ...Platform.select({\n                    web: {\n                        outlineWidth: 0,\n                        outlineColor: 'transparent',\n                        outlineOffset: 0,\n                    },\n                }),\n            },\n        ]} autoFocus={this.props.textInputAutoFocus} value={this.props.text} enablesReturnKeyAutomatically underlineColorAndroid='transparent' keyboardAppearance={this.props.keyboardAppearance} {...this.props.textInputProps}/>);\n    }\n}\nComposer.defaultProps = {\n    composerHeight: MIN_COMPOSER_HEIGHT,\n    text: '',\n    placeholderTextColor: Color.defaultColor,\n    placeholder: DEFAULT_PLACEHOLDER,\n    textInputProps: null,\n    multiline: true,\n    disableComposer: false,\n    textInputStyle: {},\n    textInputAutoFocus: false,\n    keyboardAppearance: 'default',\n    onTextChanged: () => { },\n    onInputSizeChanged: () => { },\n};\nComposer.propTypes = {\n    composerHeight: PropTypes.number,\n    text: PropTypes.string,\n    placeholder: PropTypes.string,\n    placeholderTextColor: PropTypes.string,\n    textInputProps: PropTypes.object,\n    onTextChanged: PropTypes.func,\n    onInputSizeChanged: PropTypes.func,\n    multiline: PropTypes.bool,\n    disableComposer: PropTypes.bool,\n    textInputStyle: StylePropType,\n    textInputAutoFocus: PropTypes.bool,\n    keyboardAppearance: PropTypes.string,\n};\n//# sourceMappingURL=Composer.js.map"]},"metadata":{},"sourceType":"module"}