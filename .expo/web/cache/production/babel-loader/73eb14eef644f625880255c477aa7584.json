{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import PropTypes from'prop-types';import React from'react';import Text from\"react-native-web/dist/exports/Text\";import Clipboard from\"react-native-web/dist/exports/Clipboard\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableWithoutFeedback from\"react-native-web/dist/exports/TouchableWithoutFeedback\";import View from\"react-native-web/dist/exports/View\";import QuickReplies from\"./QuickReplies\";import MessageText from\"./MessageText\";import MessageImage from\"./MessageImage\";import MessageVideo from\"./MessageVideo\";import MessageAudio from\"./MessageAudio\";import Time from\"./Time\";import Color from\"./Color\";import{StylePropType,isSameUser,isSameDay}from\"./utils\";var styles={left:StyleSheet.create({container:{flex:1,alignItems:'flex-start'},wrapper:{borderRadius:15,backgroundColor:Color.leftBubbleBackground,marginRight:60,minHeight:20,justifyContent:'flex-end'},containerToNext:{borderBottomLeftRadius:3},containerToPrevious:{borderTopLeftRadius:3},bottom:{flexDirection:'row',justifyContent:'flex-start'}}),right:StyleSheet.create({container:{flex:1,alignItems:'flex-end'},wrapper:{borderRadius:15,backgroundColor:Color.defaultBlue,marginLeft:60,minHeight:20,justifyContent:'flex-end'},containerToNext:{borderBottomRightRadius:3},containerToPrevious:{borderTopRightRadius:3},bottom:{flexDirection:'row',justifyContent:'flex-end'}}),content:StyleSheet.create({tick:{fontSize:10,backgroundColor:Color.backgroundTransparent,color:Color.white},tickView:{flexDirection:'row',marginRight:10},username:{top:-3,left:0,fontSize:12,backgroundColor:'transparent',color:'#aaa'},usernameView:{flexDirection:'row',marginHorizontal:10}})};var DEFAULT_OPTION_TITLES=['Copy Text','Cancel'];var Bubble=function(_React$Component){_inherits(Bubble,_React$Component);var _super=_createSuper(Bubble);function Bubble(){var _this;_classCallCheck(this,Bubble);_this=_super.apply(this,arguments);_this.onLongPress=function(){var currentMessage=_this.props.currentMessage;if(_this.props.onLongPress){_this.props.onLongPress(_this.context,_this.props.currentMessage);}else if(currentMessage&&currentMessage.text){var optionTitles=_this.props.optionTitles;var options=optionTitles&&optionTitles.length>0?optionTitles.slice(0,2):DEFAULT_OPTION_TITLES;var cancelButtonIndex=options.length-1;_this.context.actionSheet().showActionSheetWithOptions({options:options,cancelButtonIndex:cancelButtonIndex},function(buttonIndex){switch(buttonIndex){case 0:Clipboard.setString(currentMessage.text);break;default:break;}});}};return _this;}_createClass(Bubble,[{key:\"styledBubbleToNext\",value:function styledBubbleToNext(){var _this$props=this.props,currentMessage=_this$props.currentMessage,nextMessage=_this$props.nextMessage,position=_this$props.position,containerToNextStyle=_this$props.containerToNextStyle;if(currentMessage&&nextMessage&&position&&isSameUser(currentMessage,nextMessage)&&isSameDay(currentMessage,nextMessage)){return[styles[position].containerToNext,containerToNextStyle&&containerToNextStyle[position]];}return null;}},{key:\"styledBubbleToPrevious\",value:function styledBubbleToPrevious(){var _this$props2=this.props,currentMessage=_this$props2.currentMessage,previousMessage=_this$props2.previousMessage,position=_this$props2.position,containerToPreviousStyle=_this$props2.containerToPreviousStyle;if(currentMessage&&previousMessage&&position&&isSameUser(currentMessage,previousMessage)&&isSameDay(currentMessage,previousMessage)){return[styles[position].containerToPrevious,containerToPreviousStyle&&containerToPreviousStyle[position]];}return null;}},{key:\"renderQuickReplies\",value:function renderQuickReplies(){var _this$props3=this.props,currentMessage=_this$props3.currentMessage,onQuickReply=_this$props3.onQuickReply,nextMessage=_this$props3.nextMessage,renderQuickReplySend=_this$props3.renderQuickReplySend,quickReplyStyle=_this$props3.quickReplyStyle;if(currentMessage&&currentMessage.quickReplies){var _this$props4=this.props,containerStyle=_this$props4.containerStyle,wrapperStyle=_this$props4.wrapperStyle,quickReplyProps=_objectWithoutProperties(_this$props4,[\"containerStyle\",\"wrapperStyle\"]);if(this.props.renderQuickReplies){return this.props.renderQuickReplies(quickReplyProps);}return React.createElement(QuickReplies,{currentMessage:currentMessage,onQuickReply:onQuickReply,nextMessage:nextMessage,renderQuickReplySend:renderQuickReplySend,quickReplyStyle:quickReplyStyle});}return null;}},{key:\"renderMessageText\",value:function renderMessageText(){if(this.props.currentMessage&&this.props.currentMessage.text){var _this$props5=this.props,containerStyle=_this$props5.containerStyle,wrapperStyle=_this$props5.wrapperStyle,optionTitles=_this$props5.optionTitles,messageTextProps=_objectWithoutProperties(_this$props5,[\"containerStyle\",\"wrapperStyle\",\"optionTitles\"]);if(this.props.renderMessageText){return this.props.renderMessageText(messageTextProps);}return React.createElement(MessageText,messageTextProps);}return null;}},{key:\"renderMessageImage\",value:function renderMessageImage(){if(this.props.currentMessage&&this.props.currentMessage.image){var _this$props6=this.props,containerStyle=_this$props6.containerStyle,wrapperStyle=_this$props6.wrapperStyle,messageImageProps=_objectWithoutProperties(_this$props6,[\"containerStyle\",\"wrapperStyle\"]);if(this.props.renderMessageImage){return this.props.renderMessageImage(messageImageProps);}return React.createElement(MessageImage,messageImageProps);}return null;}},{key:\"renderMessageVideo\",value:function renderMessageVideo(){if(this.props.currentMessage&&this.props.currentMessage.video){var _this$props7=this.props,containerStyle=_this$props7.containerStyle,wrapperStyle=_this$props7.wrapperStyle,messageVideoProps=_objectWithoutProperties(_this$props7,[\"containerStyle\",\"wrapperStyle\"]);if(this.props.renderMessageVideo){return this.props.renderMessageVideo(messageVideoProps);}return React.createElement(MessageVideo,messageVideoProps);}return null;}},{key:\"renderMessageAudio\",value:function renderMessageAudio(){if(this.props.currentMessage&&this.props.currentMessage.audio){var _this$props8=this.props,containerStyle=_this$props8.containerStyle,wrapperStyle=_this$props8.wrapperStyle,messageAudioProps=_objectWithoutProperties(_this$props8,[\"containerStyle\",\"wrapperStyle\"]);if(this.props.renderMessageAudio){return this.props.renderMessageAudio(messageAudioProps);}return React.createElement(MessageAudio,messageAudioProps);}return null;}},{key:\"renderTicks\",value:function renderTicks(){var _this$props9=this.props,currentMessage=_this$props9.currentMessage,renderTicks=_this$props9.renderTicks,user=_this$props9.user;if(renderTicks&&currentMessage){return renderTicks(currentMessage);}if(currentMessage&&user&&currentMessage.user&&currentMessage.user._id!==user._id){return null;}if(currentMessage&&(currentMessage.sent||currentMessage.received||currentMessage.pending)){return React.createElement(View,{style:styles.content.tickView},!!currentMessage.sent&&React.createElement(Text,{style:[styles.content.tick,this.props.tickStyle]},\"\\u2713\"),!!currentMessage.received&&React.createElement(Text,{style:[styles.content.tick,this.props.tickStyle]},\"\\u2713\"),!!currentMessage.pending&&React.createElement(Text,{style:[styles.content.tick,this.props.tickStyle]},\"\\uD83D\\uDD53\"));}return null;}},{key:\"renderTime\",value:function renderTime(){if(this.props.currentMessage&&this.props.currentMessage.createdAt){var _this$props10=this.props,containerStyle=_this$props10.containerStyle,wrapperStyle=_this$props10.wrapperStyle,textStyle=_this$props10.textStyle,timeProps=_objectWithoutProperties(_this$props10,[\"containerStyle\",\"wrapperStyle\",\"textStyle\"]);if(this.props.renderTime){return this.props.renderTime(timeProps);}return React.createElement(Time,timeProps);}return null;}},{key:\"renderUsername\",value:function renderUsername(){var _this$props11=this.props,currentMessage=_this$props11.currentMessage,user=_this$props11.user;if(this.props.renderUsernameOnMessage&&currentMessage){if(user&&currentMessage.user._id===user._id){return null;}return React.createElement(View,{style:styles.content.usernameView},React.createElement(Text,{style:[styles.content.username,this.props.usernameStyle]},\"~ \",currentMessage.user.name));}return null;}},{key:\"renderCustomView\",value:function renderCustomView(){if(this.props.renderCustomView){return this.props.renderCustomView(this.props);}return null;}},{key:\"renderBubbleContent\",value:function renderBubbleContent(){return this.props.isCustomViewBottom?React.createElement(View,null,this.renderMessageImage(),this.renderMessageVideo(),this.renderMessageAudio(),this.renderMessageText(),this.renderCustomView()):React.createElement(View,null,this.renderCustomView(),this.renderMessageImage(),this.renderMessageVideo(),this.renderMessageAudio(),this.renderMessageText());}},{key:\"render\",value:function render(){var _this$props12=this.props,position=_this$props12.position,containerStyle=_this$props12.containerStyle,wrapperStyle=_this$props12.wrapperStyle,bottomContainerStyle=_this$props12.bottomContainerStyle;return React.createElement(View,{style:[styles[position].container,containerStyle&&containerStyle[position]]},React.createElement(View,{style:[styles[position].wrapper,this.styledBubbleToNext(),this.styledBubbleToPrevious(),wrapperStyle&&wrapperStyle[position]]},React.createElement(TouchableWithoutFeedback,_extends({onLongPress:this.onLongPress,accessibilityTraits:\"text\"},this.props.touchableProps),React.createElement(View,null,this.renderBubbleContent(),React.createElement(View,{style:[styles[position].bottom,bottomContainerStyle&&bottomContainerStyle[position]]},this.renderUsername(),this.renderTime(),this.renderTicks())))),this.renderQuickReplies());}}]);return Bubble;}(React.Component);export{Bubble as default};Bubble.contextTypes={actionSheet:PropTypes.func};Bubble.defaultProps={touchableProps:{},onLongPress:null,renderMessageImage:null,renderMessageVideo:null,renderMessageAudio:null,renderMessageText:null,renderCustomView:null,renderUsername:null,renderTicks:null,renderTime:null,renderQuickReplies:null,onQuickReply:null,position:'left',optionTitles:DEFAULT_OPTION_TITLES,currentMessage:{text:null,createdAt:null,image:null},nextMessage:{},previousMessage:{},containerStyle:{},wrapperStyle:{},bottomContainerStyle:{},tickStyle:{},usernameStyle:{},containerToNextStyle:{},containerToPreviousStyle:{}};Bubble.propTypes={user:PropTypes.object.isRequired,touchableProps:PropTypes.object,onLongPress:PropTypes.func,renderMessageImage:PropTypes.func,renderMessageVideo:PropTypes.func,renderMessageAudio:PropTypes.func,renderMessageText:PropTypes.func,renderCustomView:PropTypes.func,isCustomViewBottom:PropTypes.bool,renderUsernameOnMessage:PropTypes.bool,renderUsername:PropTypes.func,renderTime:PropTypes.func,renderTicks:PropTypes.func,renderQuickReplies:PropTypes.func,onQuickReply:PropTypes.func,position:PropTypes.oneOf(['left','right']),optionTitles:PropTypes.arrayOf(PropTypes.string),currentMessage:PropTypes.object,nextMessage:PropTypes.object,previousMessage:PropTypes.object,containerStyle:PropTypes.shape({left:StylePropType,right:StylePropType}),wrapperStyle:PropTypes.shape({left:StylePropType,right:StylePropType}),bottomContainerStyle:PropTypes.shape({left:StylePropType,right:StylePropType}),tickStyle:StylePropType,usernameStyle:StylePropType,containerToNextStyle:PropTypes.shape({left:StylePropType,right:StylePropType}),containerToPreviousStyle:PropTypes.shape({left:StylePropType,right:StylePropType})};","map":{"version":3,"sources":["../src/Bubble.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Text, Clipboard, StyleSheet, TouchableWithoutFeedback, View, } from 'react-native';\nimport QuickReplies from './QuickReplies';\nimport MessageText from './MessageText';\nimport MessageImage from './MessageImage';\nimport MessageVideo from './MessageVideo';\nimport MessageAudio from './MessageAudio';\nimport Time from './Time';\nimport Color from './Color';\nimport { StylePropType, isSameUser, isSameDay } from './utils';\nconst styles = {\n    left: StyleSheet.create({\n        container: {\n            flex: 1,\n            alignItems: 'flex-start',\n        },\n        wrapper: {\n            borderRadius: 15,\n            backgroundColor: Color.leftBubbleBackground,\n            marginRight: 60,\n            minHeight: 20,\n            justifyContent: 'flex-end',\n        },\n        containerToNext: {\n            borderBottomLeftRadius: 3,\n        },\n        containerToPrevious: {\n            borderTopLeftRadius: 3,\n        },\n        bottom: {\n            flexDirection: 'row',\n            justifyContent: 'flex-start',\n        },\n    }),\n    right: StyleSheet.create({\n        container: {\n            flex: 1,\n            alignItems: 'flex-end',\n        },\n        wrapper: {\n            borderRadius: 15,\n            backgroundColor: Color.defaultBlue,\n            marginLeft: 60,\n            minHeight: 20,\n            justifyContent: 'flex-end',\n        },\n        containerToNext: {\n            borderBottomRightRadius: 3,\n        },\n        containerToPrevious: {\n            borderTopRightRadius: 3,\n        },\n        bottom: {\n            flexDirection: 'row',\n            justifyContent: 'flex-end',\n        },\n    }),\n    content: StyleSheet.create({\n        tick: {\n            fontSize: 10,\n            backgroundColor: Color.backgroundTransparent,\n            color: Color.white,\n        },\n        tickView: {\n            flexDirection: 'row',\n            marginRight: 10,\n        },\n        username: {\n            top: -3,\n            left: 0,\n            fontSize: 12,\n            backgroundColor: 'transparent',\n            color: '#aaa',\n        },\n        usernameView: {\n            flexDirection: 'row',\n            marginHorizontal: 10,\n        },\n    }),\n};\nconst DEFAULT_OPTION_TITLES = ['Copy Text', 'Cancel'];\nexport default class Bubble extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.onLongPress = () => {\n            const { currentMessage } = this.props;\n            if (this.props.onLongPress) {\n                this.props.onLongPress(this.context, this.props.currentMessage);\n            }\n            else if (currentMessage && currentMessage.text) {\n                const { optionTitles } = this.props;\n                const options = optionTitles && optionTitles.length > 0\n                    ? optionTitles.slice(0, 2)\n                    : DEFAULT_OPTION_TITLES;\n                const cancelButtonIndex = options.length - 1;\n                this.context.actionSheet().showActionSheetWithOptions({\n                    options,\n                    cancelButtonIndex,\n                }, (buttonIndex) => {\n                    switch (buttonIndex) {\n                        case 0:\n                            Clipboard.setString(currentMessage.text);\n                            break;\n                        default:\n                            break;\n                    }\n                });\n            }\n        };\n    }\n    styledBubbleToNext() {\n        const { currentMessage, nextMessage, position, containerToNextStyle, } = this.props;\n        if (currentMessage &&\n            nextMessage &&\n            position &&\n            isSameUser(currentMessage, nextMessage) &&\n            isSameDay(currentMessage, nextMessage)) {\n            return [\n                styles[position].containerToNext,\n                containerToNextStyle && containerToNextStyle[position],\n            ];\n        }\n        return null;\n    }\n    styledBubbleToPrevious() {\n        const { currentMessage, previousMessage, position, containerToPreviousStyle, } = this.props;\n        if (currentMessage &&\n            previousMessage &&\n            position &&\n            isSameUser(currentMessage, previousMessage) &&\n            isSameDay(currentMessage, previousMessage)) {\n            return [\n                styles[position].containerToPrevious,\n                containerToPreviousStyle && containerToPreviousStyle[position],\n            ];\n        }\n        return null;\n    }\n    renderQuickReplies() {\n        const { currentMessage, onQuickReply, nextMessage, renderQuickReplySend, quickReplyStyle, } = this.props;\n        if (currentMessage && currentMessage.quickReplies) {\n            const { containerStyle, wrapperStyle, ...quickReplyProps } = this.props;\n            if (this.props.renderQuickReplies) {\n                return this.props.renderQuickReplies(quickReplyProps);\n            }\n            return (<QuickReplies {...{\n                currentMessage,\n                onQuickReply,\n                nextMessage,\n                renderQuickReplySend,\n                quickReplyStyle,\n            }}/>);\n        }\n        return null;\n    }\n    renderMessageText() {\n        if (this.props.currentMessage && this.props.currentMessage.text) {\n            const { containerStyle, wrapperStyle, optionTitles, ...messageTextProps } = this.props;\n            if (this.props.renderMessageText) {\n                return this.props.renderMessageText(messageTextProps);\n            }\n            return <MessageText {...messageTextProps}/>;\n        }\n        return null;\n    }\n    renderMessageImage() {\n        if (this.props.currentMessage && this.props.currentMessage.image) {\n            const { containerStyle, wrapperStyle, ...messageImageProps } = this.props;\n            if (this.props.renderMessageImage) {\n                return this.props.renderMessageImage(messageImageProps);\n            }\n            return <MessageImage {...messageImageProps}/>;\n        }\n        return null;\n    }\n    renderMessageVideo() {\n        if (this.props.currentMessage && this.props.currentMessage.video) {\n            const { containerStyle, wrapperStyle, ...messageVideoProps } = this.props;\n            if (this.props.renderMessageVideo) {\n                return this.props.renderMessageVideo(messageVideoProps);\n            }\n            return <MessageVideo {...messageVideoProps}/>;\n        }\n        return null;\n    }\n    renderMessageAudio() {\n        if (this.props.currentMessage && this.props.currentMessage.audio) {\n            const { containerStyle, wrapperStyle, ...messageAudioProps } = this.props;\n            if (this.props.renderMessageAudio) {\n                return this.props.renderMessageAudio(messageAudioProps);\n            }\n            return <MessageAudio {...messageAudioProps}/>;\n        }\n        return null;\n    }\n    renderTicks() {\n        const { currentMessage, renderTicks, user } = this.props;\n        if (renderTicks && currentMessage) {\n            return renderTicks(currentMessage);\n        }\n        if (currentMessage &&\n            user &&\n            currentMessage.user &&\n            currentMessage.user._id !== user._id) {\n            return null;\n        }\n        if (currentMessage &&\n            (currentMessage.sent || currentMessage.received || currentMessage.pending)) {\n            return (<View style={styles.content.tickView}>\n          {!!currentMessage.sent && (<Text style={[styles.content.tick, this.props.tickStyle]}>✓</Text>)}\n          {!!currentMessage.received && (<Text style={[styles.content.tick, this.props.tickStyle]}>✓</Text>)}\n          {!!currentMessage.pending && (<Text style={[styles.content.tick, this.props.tickStyle]}>🕓</Text>)}\n        </View>);\n        }\n        return null;\n    }\n    renderTime() {\n        if (this.props.currentMessage && this.props.currentMessage.createdAt) {\n            const { containerStyle, wrapperStyle, textStyle, ...timeProps } = this.props;\n            if (this.props.renderTime) {\n                return this.props.renderTime(timeProps);\n            }\n            return <Time {...timeProps}/>;\n        }\n        return null;\n    }\n    renderUsername() {\n        const { currentMessage, user } = this.props;\n        if (this.props.renderUsernameOnMessage && currentMessage) {\n            if (user && currentMessage.user._id === user._id) {\n                return null;\n            }\n            return (<View style={styles.content.usernameView}>\n          <Text style={[styles.content.username, this.props.usernameStyle]}>\n            ~ {currentMessage.user.name}\n          </Text>\n        </View>);\n        }\n        return null;\n    }\n    renderCustomView() {\n        if (this.props.renderCustomView) {\n            return this.props.renderCustomView(this.props);\n        }\n        return null;\n    }\n    renderBubbleContent() {\n        return this.props.isCustomViewBottom ? (<View>\n        {this.renderMessageImage()}\n        {this.renderMessageVideo()}\n        {this.renderMessageAudio()}\n        {this.renderMessageText()}\n        {this.renderCustomView()}\n      </View>) : (<View>\n        {this.renderCustomView()}\n        {this.renderMessageImage()}\n        {this.renderMessageVideo()}\n        {this.renderMessageAudio()}\n        {this.renderMessageText()}\n      </View>);\n    }\n    render() {\n        const { position, containerStyle, wrapperStyle, bottomContainerStyle, } = this.props;\n        return (<View style={[\n            styles[position].container,\n            containerStyle && containerStyle[position],\n        ]}>\n        <View style={[\n            styles[position].wrapper,\n            this.styledBubbleToNext(),\n            this.styledBubbleToPrevious(),\n            wrapperStyle && wrapperStyle[position],\n        ]}>\n          <TouchableWithoutFeedback onLongPress={this.onLongPress} accessibilityTraits='text' {...this.props.touchableProps}>\n            <View>\n              {this.renderBubbleContent()}\n              <View style={[\n            styles[position].bottom,\n            bottomContainerStyle && bottomContainerStyle[position],\n        ]}>\n                {this.renderUsername()}\n                {this.renderTime()}\n                {this.renderTicks()}\n              </View>\n            </View>\n          </TouchableWithoutFeedback>\n        </View>\n        {this.renderQuickReplies()}\n      </View>);\n    }\n}\nBubble.contextTypes = {\n    actionSheet: PropTypes.func,\n};\nBubble.defaultProps = {\n    touchableProps: {},\n    onLongPress: null,\n    renderMessageImage: null,\n    renderMessageVideo: null,\n    renderMessageAudio: null,\n    renderMessageText: null,\n    renderCustomView: null,\n    renderUsername: null,\n    renderTicks: null,\n    renderTime: null,\n    renderQuickReplies: null,\n    onQuickReply: null,\n    position: 'left',\n    optionTitles: DEFAULT_OPTION_TITLES,\n    currentMessage: {\n        text: null,\n        createdAt: null,\n        image: null,\n    },\n    nextMessage: {},\n    previousMessage: {},\n    containerStyle: {},\n    wrapperStyle: {},\n    bottomContainerStyle: {},\n    tickStyle: {},\n    usernameStyle: {},\n    containerToNextStyle: {},\n    containerToPreviousStyle: {},\n};\nBubble.propTypes = {\n    user: PropTypes.object.isRequired,\n    touchableProps: PropTypes.object,\n    onLongPress: PropTypes.func,\n    renderMessageImage: PropTypes.func,\n    renderMessageVideo: PropTypes.func,\n    renderMessageAudio: PropTypes.func,\n    renderMessageText: PropTypes.func,\n    renderCustomView: PropTypes.func,\n    isCustomViewBottom: PropTypes.bool,\n    renderUsernameOnMessage: PropTypes.bool,\n    renderUsername: PropTypes.func,\n    renderTime: PropTypes.func,\n    renderTicks: PropTypes.func,\n    renderQuickReplies: PropTypes.func,\n    onQuickReply: PropTypes.func,\n    position: PropTypes.oneOf(['left', 'right']),\n    optionTitles: PropTypes.arrayOf(PropTypes.string),\n    currentMessage: PropTypes.object,\n    nextMessage: PropTypes.object,\n    previousMessage: PropTypes.object,\n    containerStyle: PropTypes.shape({\n        left: StylePropType,\n        right: StylePropType,\n    }),\n    wrapperStyle: PropTypes.shape({\n        left: StylePropType,\n        right: StylePropType,\n    }),\n    bottomContainerStyle: PropTypes.shape({\n        left: StylePropType,\n        right: StylePropType,\n    }),\n    tickStyle: StylePropType,\n    usernameStyle: StylePropType,\n    containerToNextStyle: PropTypes.shape({\n        left: StylePropType,\n        right: StylePropType,\n    }),\n    containerToPreviousStyle: PropTypes.shape({\n        left: StylePropType,\n        right: StylePropType,\n    }),\n};\n//# sourceMappingURL=Bubble.js.map"]},"metadata":{},"sourceType":"module"}