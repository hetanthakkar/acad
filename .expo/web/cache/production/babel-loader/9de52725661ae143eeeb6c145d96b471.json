{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/inherits\";var _jsxFileName=\"/home/bradley/Code/expo/react-native-action-sheet/src/ActionSheet/index.tsx\";import*as React from'react';import Animated from\"react-native-web/dist/exports/Animated\";import BackHandler from\"react-native-web/dist/exports/BackHandler\";import Easing from\"react-native-web/dist/exports/Easing\";import Modal from\"react-native-web/dist/exports/Modal\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableWithoutFeedback from\"react-native-web/dist/exports/TouchableWithoutFeedback\";import View from\"react-native-web/dist/exports/View\";import ActionGroup from\"./ActionGroup\";var OPACITY_ANIMATION_IN_TIME=225;var OPACITY_ANIMATION_OUT_TIME=195;var EASING_OUT=Easing.bezier(0.25,0.46,0.45,0.94);var EASING_IN=Easing.out(EASING_OUT);var ActionSheet=function(_React$Component){_inherits(ActionSheet,_React$Component);function ActionSheet(){var _getPrototypeOf2;var _this;_classCallCheck(this,ActionSheet);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ActionSheet)).call.apply(_getPrototypeOf2,[this].concat(args)));_this._actionSheetHeight=360;_this.state={isVisible:false,isAnimating:false,options:null,onSelect:null,overlayOpacity:new Animated.Value(0),sheetOpacity:new Animated.Value(0)};_this._deferNextShow=undefined;_this._setActionSheetHeight=function(_ref){var nativeEvent=_ref.nativeEvent;return _this._actionSheetHeight=nativeEvent.layout.height;};_this.showActionSheetWithOptions=function(options,onSelect){var _this$state=_this.state,isVisible=_this$state.isVisible,overlayOpacity=_this$state.overlayOpacity,sheetOpacity=_this$state.sheetOpacity;if(isVisible){_this._deferNextShow=_this.showActionSheetWithOptions.bind(_assertThisInitialized(_this),options,onSelect);return;}_this.setState({options:options,onSelect:onSelect,isVisible:true,isAnimating:true});overlayOpacity.setValue(0);sheetOpacity.setValue(0);Animated.parallel([Animated.timing(overlayOpacity,{toValue:0.32,easing:EASING_OUT,duration:OPACITY_ANIMATION_IN_TIME,useNativeDriver:_this.props.useNativeDriver}),Animated.timing(sheetOpacity,{toValue:1,easing:EASING_OUT,duration:OPACITY_ANIMATION_IN_TIME,useNativeDriver:_this.props.useNativeDriver})]).start(function(result){if(result.finished){_this.setState({isAnimating:false});_this._deferNextShow=undefined;}});BackHandler.addEventListener('actionSheetHardwareBackPress',_this._selectCancelButton);};_this._selectCancelButton=function(){var options=_this.state.options;if(!options){return false;}if(typeof options.cancelButtonIndex==='undefined'){return;}else if(typeof options.cancelButtonIndex==='number'){return _this._onSelect(options.cancelButtonIndex);}else{return _this._animateOut();}};_this._onSelect=function(index){var _this$state2=_this.state,isAnimating=_this$state2.isAnimating,onSelect=_this$state2.onSelect;if(isAnimating){return false;}onSelect&&onSelect(index);return _this._animateOut();};_this._animateOut=function(){var _this$state3=_this.state,isAnimating=_this$state3.isAnimating,overlayOpacity=_this$state3.overlayOpacity,sheetOpacity=_this$state3.sheetOpacity;if(isAnimating){return false;}BackHandler.removeEventListener('actionSheetHardwareBackPress',_this._selectCancelButton);_this.setState({isAnimating:true});Animated.parallel([Animated.timing(overlayOpacity,{toValue:0,easing:EASING_IN,duration:OPACITY_ANIMATION_OUT_TIME,useNativeDriver:_this.props.useNativeDriver}),Animated.timing(sheetOpacity,{toValue:0,easing:EASING_IN,duration:OPACITY_ANIMATION_OUT_TIME,useNativeDriver:_this.props.useNativeDriver})]).start(function(result){if(result.finished){_this.setState({isVisible:false,isAnimating:false});if(_this._deferNextShow){_this._deferNextShow();}}});return true;};return _this;}_createClass(ActionSheet,[{key:\"render\",value:function render(){var _this$state4=this.state,isVisible=_this$state4.isVisible,overlayOpacity=_this$state4.overlayOpacity,options=_this$state4.options;var useModal=options?options.useModal===true:false;var overlay=isVisible?React.createElement(Animated.View,{style:[styles.overlay,{opacity:overlayOpacity}],__source:{fileName:_jsxFileName,lineNumber:60}}):null;var appContent=React.createElement(View,{style:styles.flexContainer,importantForAccessibility:isVisible?'no-hide-descendants':'auto',__source:{fileName:_jsxFileName,lineNumber:72}},React.Children.only(this.props.children));return React.createElement(View,{pointerEvents:this.props.pointerEvents,style:styles.flexContainer,__source:{fileName:_jsxFileName,lineNumber:80}},appContent,isVisible&&!useModal&&React.createElement(React.Fragment,{__source:{fileName:_jsxFileName,lineNumber:83}},overlay,this._renderSheet()),isVisible&&useModal&&React.createElement(Modal,{animationType:\"none\",transparent:true,onRequestClose:this._selectCancelButton,__source:{fileName:_jsxFileName,lineNumber:89}},overlay,this._renderSheet()));}},{key:\"_renderSheet\",value:function _renderSheet(){var _this$state5=this.state,options=_this$state5.options,isAnimating=_this$state5.isAnimating,sheetOpacity=_this$state5.sheetOpacity;if(!options){return null;}var optionsArray=options.options,icons=options.icons,tintIcons=options.tintIcons,destructiveButtonIndex=options.destructiveButtonIndex,destructiveColor=options.destructiveColor,textStyle=options.textStyle,tintColor=options.tintColor,title=options.title,titleTextStyle=options.titleTextStyle,message=options.message,messageTextStyle=options.messageTextStyle,autoFocus=options.autoFocus,showSeparators=options.showSeparators,containerStyle=options.containerStyle,separatorStyle=options.separatorStyle;return React.createElement(TouchableWithoutFeedback,{importantForAccessibility:\"yes\",onPress:this._selectCancelButton,__source:{fileName:_jsxFileName,lineNumber:123}},React.createElement(Animated.View,{needsOffscreenAlphaCompositing:isAnimating,style:[styles.sheetContainer,{opacity:sheetOpacity,transform:[{translateY:sheetOpacity.interpolate({inputRange:[0,1],outputRange:[this._actionSheetHeight,0]})}]}],__source:{fileName:_jsxFileName,lineNumber:124}},React.createElement(View,{style:styles.sheet,onLayout:this._setActionSheetHeight,__source:{fileName:_jsxFileName,lineNumber:140}},React.createElement(ActionGroup,{options:optionsArray,icons:icons,tintIcons:tintIcons===undefined?true:tintIcons,destructiveButtonIndex:destructiveButtonIndex,destructiveColor:destructiveColor,onSelect:this._onSelect,startIndex:0,length:optionsArray.length,textStyle:textStyle||{},tintColor:tintColor,title:title||undefined,titleTextStyle:titleTextStyle,message:message||undefined,messageTextStyle:messageTextStyle,autoFocus:autoFocus,showSeparators:showSeparators,containerStyle:containerStyle,separatorStyle:separatorStyle,__source:{fileName:_jsxFileName,lineNumber:141}}))));}}]);return ActionSheet;}(React.Component);ActionSheet.defaultProps={useNativeDriver:true};export{ActionSheet as default};var styles=StyleSheet.create({flexContainer:{flex:1},overlay:{position:'absolute',top:0,right:0,bottom:0,left:0,backgroundColor:'black'},sheetContainer:{position:'absolute',left:0,right:0,bottom:0,top:0,backgroundColor:'transparent',alignItems:'flex-end',justifyContent:'center',flexDirection:'row'},sheet:{flex:1,backgroundColor:'transparent'}});","map":{"version":3,"sources":["index.tsx"],"names":["OPACITY_ANIMATION_IN_TIME","OPACITY_ANIMATION_OUT_TIME","EASING_OUT","Easing","EASING_IN","ActionSheet","React","Component","defaultProps","useNativeDriver","_actionSheetHeight","state","isVisible","isAnimating","options","onSelect","overlayOpacity","Animated","sheetOpacity","_deferNextShow","undefined","_setActionSheetHeight","nativeEvent","useModal","overlay","styles","opacity","appContent","optionsArray","icons","tintIcons","destructiveButtonIndex","destructiveColor","textStyle","tintColor","title","titleTextStyle","message","messageTextStyle","autoFocus","showSeparators","containerStyle","separatorStyle","transform","translateY","inputRange","outputRange","showActionSheetWithOptions","toValue","easing","duration","result","BackHandler","_selectCancelButton","_onSelect","_animateOut","StyleSheet","flexContainer","flex","position","top","right","bottom","left","backgroundColor","sheetContainer","alignItems","justifyContent","flexDirection","sheet"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  Animated,\n  BackHandler,\n  Easing,\n  Modal,\n  StyleSheet,\n  TouchableWithoutFeedback,\n  View,\n  ViewProps,\n} from 'react-native';\nimport ActionGroup from './ActionGroup';\nimport { ActionSheetOptions } from '../types';\n\ninterface State {\n  isVisible: boolean;\n  isAnimating: boolean;\n  options: ActionSheetOptions | null;\n  onSelect: ((i: number) => void) | null;\n  overlayOpacity: any;\n  sheetOpacity: any;\n}\n\ninterface Props {\n  readonly useNativeDriver: boolean | undefined;\n  readonly pointerEvents?: ViewProps['pointerEvents'];\n}\n\nconst OPACITY_ANIMATION_IN_TIME = 225;\nconst OPACITY_ANIMATION_OUT_TIME = 195;\nconst EASING_OUT = Easing.bezier(0.25, 0.46, 0.45, 0.94);\nconst EASING_IN = Easing.out(EASING_OUT);\n\n// Has same API as https://facebook.github.io/react-native/docs/actionsheetios.html\nexport default class ActionSheet extends React.Component<Props, State> {\n  static defaultProps = {\n    useNativeDriver: true,\n  };\n\n  _actionSheetHeight = 360;\n\n  state: State = {\n    isVisible: false,\n    isAnimating: false,\n    options: null,\n    onSelect: null,\n    overlayOpacity: new Animated.Value(0),\n    sheetOpacity: new Animated.Value(0),\n  };\n\n  _deferNextShow?: () => void = undefined;\n\n  _setActionSheetHeight = ({ nativeEvent }: any) =>\n    (this._actionSheetHeight = nativeEvent.layout.height);\n\n  render() {\n    const { isVisible, overlayOpacity, options } = this.state;\n    const useModal = options ? options.useModal === true : false;\n    const overlay = isVisible ? (\n      <Animated.View\n        style={[\n          styles.overlay,\n          {\n            opacity: overlayOpacity,\n          },\n        ]}\n      />\n    ) : null;\n\n    // While the sheet is visible, hide the rest of the app's content from screen readers.\n    const appContent = (\n      <View\n        style={styles.flexContainer}\n        importantForAccessibility={isVisible ? 'no-hide-descendants' : 'auto'}>\n        {React.Children.only(this.props.children)}\n      </View>\n    );\n\n    return (\n      <View pointerEvents={this.props.pointerEvents} style={styles.flexContainer}>\n        {appContent}\n        {isVisible && !useModal && (\n          <React.Fragment>\n            {overlay}\n            {this._renderSheet()}\n          </React.Fragment>\n        )}\n        {isVisible && useModal && (\n          <Modal animationType=\"none\" transparent={true} onRequestClose={this._selectCancelButton}>\n            {overlay}\n            {this._renderSheet()}\n          </Modal>\n        )}\n      </View>\n    );\n  }\n\n  _renderSheet() {\n    const { options, isAnimating, sheetOpacity } = this.state;\n\n    if (!options) {\n      return null;\n    }\n\n    const {\n      options: optionsArray,\n      icons,\n      tintIcons,\n      destructiveButtonIndex,\n      destructiveColor,\n      textStyle,\n      tintColor,\n      title,\n      titleTextStyle,\n      message,\n      messageTextStyle,\n      autoFocus,\n      showSeparators,\n      containerStyle,\n      separatorStyle,\n    } = options;\n    return (\n      <TouchableWithoutFeedback importantForAccessibility=\"yes\" onPress={this._selectCancelButton}>\n        <Animated.View\n          needsOffscreenAlphaCompositing={isAnimating}\n          style={[\n            styles.sheetContainer,\n            {\n              opacity: sheetOpacity,\n              transform: [\n                {\n                  translateY: sheetOpacity.interpolate({\n                    inputRange: [0, 1],\n                    outputRange: [this._actionSheetHeight, 0],\n                  }),\n                },\n              ],\n            },\n          ]}>\n          <View style={styles.sheet} onLayout={this._setActionSheetHeight}>\n            <ActionGroup\n              options={optionsArray}\n              icons={icons}\n              tintIcons={tintIcons === undefined ? true : tintIcons}\n              destructiveButtonIndex={destructiveButtonIndex}\n              destructiveColor={destructiveColor}\n              onSelect={this._onSelect}\n              startIndex={0}\n              length={optionsArray.length}\n              textStyle={textStyle || {}}\n              tintColor={tintColor}\n              title={title || undefined}\n              titleTextStyle={titleTextStyle}\n              message={message || undefined}\n              messageTextStyle={messageTextStyle}\n              autoFocus={autoFocus}\n              showSeparators={showSeparators}\n              containerStyle={containerStyle}\n              separatorStyle={separatorStyle}\n            />\n          </View>\n        </Animated.View>\n      </TouchableWithoutFeedback>\n    );\n  }\n\n  showActionSheetWithOptions = (options: ActionSheetOptions, onSelect: (i: number) => void) => {\n    const { isVisible, overlayOpacity, sheetOpacity } = this.state;\n\n    if (isVisible) {\n      this._deferNextShow = this.showActionSheetWithOptions.bind(this, options, onSelect);\n      return;\n    }\n\n    this.setState({\n      options,\n      onSelect,\n      isVisible: true,\n      isAnimating: true,\n    });\n    overlayOpacity.setValue(0);\n    sheetOpacity.setValue(0);\n    Animated.parallel([\n      Animated.timing(overlayOpacity, {\n        toValue: 0.32,\n        easing: EASING_OUT,\n        duration: OPACITY_ANIMATION_IN_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n      Animated.timing(sheetOpacity, {\n        toValue: 1,\n        easing: EASING_OUT,\n        duration: OPACITY_ANIMATION_IN_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n    ]).start(result => {\n      if (result.finished) {\n        this.setState({\n          isAnimating: false,\n        });\n        this._deferNextShow = undefined;\n      }\n    });\n    // @ts-ignore: Argument of type '\"actionSheetHardwareBackPress\"' is not assignable to parameter of type '\"hardwareBackPress\"'\n    BackHandler.addEventListener('actionSheetHardwareBackPress', this._selectCancelButton);\n  };\n\n  _selectCancelButton = () => {\n    const { options } = this.state;\n\n    if (!options) {\n      return false;\n    }\n\n    if (typeof options.cancelButtonIndex === 'undefined') {\n      return;\n    } else if (typeof options.cancelButtonIndex === 'number') {\n      return this._onSelect(options.cancelButtonIndex);\n    } else {\n      return this._animateOut();\n    }\n  };\n\n  _onSelect = (index: number): boolean => {\n    const { isAnimating, onSelect } = this.state;\n\n    if (isAnimating) {\n      return false;\n    }\n\n    onSelect && onSelect(index);\n    return this._animateOut();\n  };\n\n  _animateOut = (): boolean => {\n    const { isAnimating, overlayOpacity, sheetOpacity } = this.state;\n\n    if (isAnimating) {\n      return false;\n    }\n\n    // @ts-ignore: Argument of type '\"actionSheetHardwareBackPress\"' is not assignable to parameter of type '\"hardwareBackPress\"'\n    BackHandler.removeEventListener('actionSheetHardwareBackPress', this._selectCancelButton);\n    this.setState({\n      isAnimating: true,\n    });\n    Animated.parallel([\n      Animated.timing(overlayOpacity, {\n        toValue: 0,\n        easing: EASING_IN,\n        duration: OPACITY_ANIMATION_OUT_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n      Animated.timing(sheetOpacity, {\n        toValue: 0,\n        easing: EASING_IN,\n        duration: OPACITY_ANIMATION_OUT_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n    ]).start(result => {\n      if (result.finished) {\n        this.setState({\n          isVisible: false,\n          isAnimating: false,\n        });\n\n        if (this._deferNextShow) {\n          this._deferNextShow();\n        }\n      }\n    });\n    return true;\n  };\n}\n\nconst styles = StyleSheet.create({\n  flexContainer: {\n    flex: 1,\n  },\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    backgroundColor: 'black',\n  },\n  sheetContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    top: 0,\n    backgroundColor: 'transparent',\n    alignItems: 'flex-end',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  sheet: {\n    flex: 1,\n    backgroundColor: 'transparent',\n  },\n});\n"]},"metadata":{},"sourceType":"module"}